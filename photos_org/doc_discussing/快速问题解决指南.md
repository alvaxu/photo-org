# å¿«é€Ÿé—®é¢˜è§£å†³æŒ‡å—

## æ–‡æ¡£è¯´æ˜Ž

æœ¬æ–‡æ¡£æä¾›å¸¸è§é—®é¢˜çš„å¿«é€Ÿè§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºŽç´§æ€¥æƒ…å†µä¸‹çš„é—®é¢˜æŽ’æŸ¥å’Œä¿®å¤ã€‚

**ä½¿ç”¨åœºæ™¯**: ç³»ç»Ÿå‡ºçŽ°é—®é¢˜æ—¶å¿«é€Ÿå®šä½å’Œè§£å†³  
**ç›®æ ‡ç”¨æˆ·**: å¼€å‘äººå‘˜ã€ç»´æŠ¤äººå‘˜  
**æ›´æ–°é¢‘çŽ‡**: éšé—®é¢˜è§£å†³ç»éªŒæ›´æ–°  

---

## ðŸš¨ ç´§æ€¥é—®é¢˜å¿«é€Ÿä¿®å¤

### 1. ç³»ç»Ÿæ— æ³•å¯åŠ¨

#### ç—‡çŠ¶
```
ImportError: numpy.core.multiarray failed to import
AttributeError: _ARRAY_API not found
```

#### å¿«é€Ÿä¿®å¤
```bash
# 1. åœæ­¢ç³»ç»Ÿ
Ctrl+C

# 2. æ¸…ç†çŽ¯å¢ƒ
rm -rf venv
find . -name "__pycache__" -type d -exec rm -rf {} +

# 3. é‡å»ºçŽ¯å¢ƒ
python -m venv venv
venv\Scripts\activate
pip install -e .

# 4. é‡å¯ç³»ç»Ÿ
python main.py
```

#### éªŒè¯
```bash
curl http://localhost:8000/health
```

---

### 2. æ•°æ®åº“å­—æ®µç¼ºå¤±

#### ç—‡çŠ¶
```
(sqlite3.OperationalError) no such column: photos.description
```

#### å¿«é€Ÿä¿®å¤
```bash
# 1. åœæ­¢ç³»ç»Ÿ
Ctrl+C

# 2. åˆ é™¤æ•°æ®åº“
rm data/photos.db
rm -rf photos_storage

# 3. é‡å¯ç³»ç»Ÿï¼ˆè‡ªåŠ¨é‡å»ºæ•°æ®åº“ï¼‰
python main.py
```

---

### 3. å‰ç«¯æ— æ³•è®¿é—®

#### ç—‡çŠ¶
- æµè§ˆå™¨æ˜¾ç¤º404æˆ–500é”™è¯¯
- é™æ€æ–‡ä»¶æ— æ³•åŠ è½½

#### å¿«é€Ÿä¿®å¤
```bash
# 1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
curl http://localhost:8000/health

# 2. æ£€æŸ¥é™æ€æ–‡ä»¶
curl http://localhost:8000/static/index.html

# 3. é‡å¯ç³»ç»Ÿ
python main.py
```

---

## ðŸ”§ çŽ¯å¢ƒé—®é¢˜è¯Šæ–­

### æ£€æŸ¥PythonçŽ¯å¢ƒ
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version

# æ£€æŸ¥pipç‰ˆæœ¬
pip --version

# æ£€æŸ¥è™šæ‹ŸçŽ¯å¢ƒ
which python
# Windows: where python
```

### æ£€æŸ¥åŒ…ç‰ˆæœ¬
```bash
# æ£€æŸ¥å…³é”®åŒ…ç‰ˆæœ¬
pip list | grep -E "(numpy|opencv|fastapi)"

# æ£€æŸ¥åŒ…å…¼å®¹æ€§
python -c "import numpy; print('NumPy:', numpy.__version__)"
python -c "import cv2; print('OpenCV:', cv2.__version__)"
```

### æ£€æŸ¥æ•°æ®åº“
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶
ls -la data/
# Windows: dir data\

# æ£€æŸ¥æ•°æ®åº“ç»“æž„
sqlite3 data/photos.db ".schema"
```

---

## ðŸ“‹ å¸¸ç”¨è¯Šæ–­å‘½ä»¤

### ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# APIæ–‡æ¡£
curl http://localhost:8000/docs

# å‰ç«¯é¡µé¢
curl http://localhost:8000/static/index.html
```

### æ—¥å¿—æ£€æŸ¥
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/app.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep -i error logs/app.log
```

### è¿›ç¨‹æ£€æŸ¥
```bash
# æ£€æŸ¥Pythonè¿›ç¨‹
ps aux | grep python
# Windows: tasklist | findstr python

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :8000
# Windows: netstat -an | findstr :8000
```

---

## ðŸ› ï¸ çŽ¯å¢ƒé‡å»ºæµç¨‹

### å®Œæ•´çŽ¯å¢ƒé‡å»º
```bash
# 1. å¤‡ä»½é‡è¦æ•°æ®
cp -r photos_storage photos_storage_backup
cp data/photos.db data/photos.db.backup

# 2. æ¸…ç†çŽ¯å¢ƒ
rm -rf venv
find . -name "__pycache__" -type d -exec rm -rf {} +
find . -name "*.pyc" -delete

# 3. é‡å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv
venv\Scripts\activate
python -m pip install --upgrade pip

# 4. å®‰è£…ä¾èµ–
pip install -e .

# 5. å¯åŠ¨ç³»ç»Ÿ
python main.py
```

### å¿«é€ŸçŽ¯å¢ƒä¿®å¤
```bash
# 1. é‡æ–°å®‰è£…å…³é”®åŒ…
pip install --force-reinstall "numpy>=1.21.0,<2.0.0"
pip install --force-reinstall "opencv-python==4.8.1.78"

# 2. é‡å¯ç³»ç»Ÿ
python main.py
```

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£
- [é—®é¢˜æŽ’æŸ¥ä¸Žè§£å†³ç»éªŒæ–‡æ¡£.md](./é—®é¢˜æŽ’æŸ¥ä¸Žè§£å†³ç»éªŒæ–‡æ¡£.md)
- [NumPy_OpenCVå…¼å®¹æ€§é—®é¢˜è§£å†³æ¡ˆä¾‹.md](./NumPy_OpenCVå…¼å®¹æ€§é—®é¢˜è§£å†³æ¡ˆä¾‹.md)
- [å¼€å‘çŽ¯å¢ƒæ­å»ºæŒ‡å—.md](./å¼€å‘çŽ¯å¢ƒæ­å»ºæŒ‡å—.md)

### é…ç½®æ–‡ä»¶
- `requirements.txt`: ä¾èµ–åŒ…ç‰ˆæœ¬çº¦æŸ
- `config.json`: ç³»ç»Ÿé…ç½®æ–‡ä»¶
- `setup.py`: é¡¹ç›®åŒ…é…ç½®

### è„šæœ¬æ–‡ä»¶
- `main.py`: ç³»ç»Ÿå¯åŠ¨å…¥å£
- `test_package_import.py`: åŒ…å¯¼å…¥æµ‹è¯•
- `run_system_test.py`: ç³»ç»ŸåŠŸèƒ½æµ‹è¯•

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ•°æ®å®‰å…¨
- é‡å»ºçŽ¯å¢ƒå‰åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®
- æ•°æ®åº“æ–‡ä»¶ä½äºŽ `data/photos.db`
- ç…§ç‰‡æ–‡ä»¶ä½äºŽ `photos_storage/` ç›®å½•

### ç‰ˆæœ¬å…¼å®¹æ€§
- NumPyç‰ˆæœ¬å¿…é¡» < 2.0.0
- OpenCVç‰ˆæœ¬å›ºå®šä¸º 4.8.1.78
- Pythonç‰ˆæœ¬å»ºè®®ä½¿ç”¨ 3.8-3.12

### å¸¸è§é™·é˜±
- ä¸è¦ä½¿ç”¨ `pip install --upgrade` å‡çº§å…³é”®åŒ…
- é¿å…åœ¨å…¨å±€çŽ¯å¢ƒå®‰è£…é¡¹ç›®ä¾èµ–
- ç¡®ä¿è™šæ‹ŸçŽ¯å¢ƒè·¯å¾„æ­£ç¡®

---

## ðŸ†˜ ç´§æ€¥è”ç³»

å¦‚æžœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š

1. **æ”¶é›†ä¿¡æ¯**
   - å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
   - ç³»ç»ŸçŽ¯å¢ƒä¿¡æ¯
   - é—®é¢˜å¤çŽ°æ­¥éª¤

2. **æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£**
   - å‚è€ƒ `doc/é—®é¢˜æŽ’æŸ¥ä¸Žè§£å†³ç»éªŒæ–‡æ¡£.md`
   - æŸ¥çœ‹ç›¸å…³é”™è¯¯æ¡ˆä¾‹

3. **å¯»æ±‚å¸®åŠ©**
   - æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
   - è¯´æ˜Žå·²å°è¯•çš„è§£å†³æ–¹æ¡ˆ
   - é™„ä¸Šç³»ç»ŸçŽ¯å¢ƒä¿¡æ¯

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£åº”ä¿æŒç®€æ´æ˜Žäº†ï¼Œä¾¿äºŽç´§æ€¥æƒ…å†µä¸‹å¿«é€ŸæŸ¥é˜…ã€‚
