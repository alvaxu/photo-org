{
  "system": {
    "max_file_size": 52428800,
    "timeout": 10,
    "max_concurrent": 2,
    "temp_file_max_age": 24
  },
  "database": {
    "path": "./photo_db/photos.db"
  },
  "dashscope": {
    "api_key": "",
    "base_url": "https://dashscope.aliyuncs.com/api/v1",
    "model": "qwen-vl-plus",
    "available_models": [
      "qwen-vl-plus",
      "qwen-vl-plus-latest",
      "qwen-vl-plus-2025-08-15",
      "qwen-vl-plus-2025-05-07",
      "qwen-vl-plus-2025-01-25",
      "qwen-vl-plus-0102",
      "qwen-vl-max",
      "qwen-vl-max-latest",
      "qwen-vl-max-2025-08-13",
      "qwen-vl-max-2025-04-08",
      "qwen-vl-max-2025-01-25",
      "qwen-vl-max-2025-04-02",
      "qwen-vl-max-1030",
      "qwen-vl-max-1119",
      "qwen-vl-max-1230",
      "qwen-vl-max-0809"
    ],
    "timeout": 30,
    "max_retry_count": 3
  },
  "storage": {
    "base_path": "./storage",
    "originals_path": "originals",
    "thumbnails_path": "thumbnails",
    "temp_path": "temp",
    "backups_path": "backups",
    "thumbnail_size": 300,
    "thumbnail_quality": 50
  },
  "analysis": {
    "duplicate_threshold": 5,
    "quality_threshold": 0,
    "concurrent": 3,
    "timeout": 30,
    "batch_size": 200,
    "batch_threshold": 100
  },
  "logging": {
    "level": "INFO",
    "file_path": "./logs/app.log",
    "max_size": "10MB",
    "backup_count": 5
  },
  "server": {
    "host": "0.0.0.0",
    "port": 8000,
    "debug": false
  },
  "ui": {
    "photos_per_page": 18,
    "similar_photos_limit": 8,
    "hot_tags_limit": 10,
    "hot_categories_limit": 10
  },
  "search": {
    "similarity_threshold": 0.5,
    "timeout": 5,
    "default_page_size": 20,
    "max_page_size": 100,
    "suggestion_limit": 10,
    "history_limit": 50
  },
  "similarity": {
    "first_layer_weights": {
      "perceptual_hash": 0.3,
      "time": 0.2,
      "location": 0.15,
      "camera": 0.1,
      "basic_tags": 0.15,
      "ai_scene": 0.03,
      "ai_objects": 0.02,
      "ai_emotion": 0.02,
      "ai_activity": 0.02,
      "ai_tags": 0.01
    },
    "first_layer_thresholds": {
      "perceptual_hash": 0.4,
      "color_histogram": 0.7,
      "structural": 0.8,
      "scene_type": 0.6,
      "objects": 0.2,
      "emotion": 0.0,
      "activity": 0.3,
      "description": 0.2,
      "tags": 0.2,
      "time": 0.5,
      "location": 0.6,
      "camera": 0.4,
      "combined": 0.3
    },
    "algorithms": {
      "primary_algorithm": "perceptual_hash",
      "fallback_algorithms": [
        "color_histogram",
        "structural"
      ],
      "ai_enabled": true,
      "exif_enabled": true
    },
    "performance": {
      "batch_size": 100,
      "cache_enabled": true,
      "cache_ttl": 3600,
      "max_concurrent": 5
    },
    "pre_screening": {
      "time_margin_days": 30,
      "location_margin": 0.1
    }
  },
  "import": {
    "supported_formats": [
      ".jpg",
      ".jpeg",
      ".png",
      ".tiff",
      ".tif",
      ".webp",
      ".bmp",
      ".gif",
      ".heic",
      ".heif"
    ],
    "max_upload_files": 50000,
    "scan_batch_size": 200,
    "batch_threshold": 100
  },
  "quality": {
    "weights": {
      "sharpness": 0.3,
      "brightness": 0.2,
      "contrast": 0.2,
      "color": 0.15,
      "composition": 0.15
    },
    "thresholds": {
      "excellent": 80,
      "good": 60,
      "fair": 40,
      "poor": 20
    }
  },
  "maps": {
    "provider": "amap",
    "api_key": "",
    "timeout": 10,
    "rate_limit": 180,
    "cache_enabled": true,
    "cache_ttl": 86400,
    "batch_size": 200,
    "configured": false
  },
  "face_recognition": {
    "enabled": true,
    "model": "buffalo_l",
    "use_local_model": true,
    "models_base_path": "./models",
    "detection_threshold": 0.6,
    "similarity_threshold": 0.7,
    "max_faces_per_photo": 10,
    "batch_size": 200,
    "batch_threshold": 100,
    "max_concurrent_batches": 3,
    "max_concurrent_photos": 6,
    "max_progress_checks": 36000,
    "max_clusters": 30,
    "min_cluster_size": 2,
    "auto_cluster": true,
    "cluster_quality_threshold": 0.8,
    "person_photos_pagination": {
      "page_size": 12,
      "max_pages_shown": 5,
      "loading_delay": 300
    }
  },
  "image_features": {
    "enabled": true,
    "model": "resnet50",
    "use_local_model": true,
    "models_base_path": "./models",
    "model_file": "resnet50/resnet50-0676ba61.pth",
    "feature_dim": 2048,
    "batch_size": 200,
    "batch_threshold": 100,
    "max_concurrent_batches": 3,
    "max_concurrent_photos": 6,
    "similarity_threshold": 0.75,
    "extraction_timeout": 30
  }
}