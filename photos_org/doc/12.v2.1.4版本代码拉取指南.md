# v2.1.4 版本代码拉取指南

## 📋 概述

本文档详细介绍如何获取家庭版智能照片系统 v2.1.4 版本的源代码。v2.1.4 版本包含重要的 PyInstaller 兼容性修复和配置管理功能完善。

**版本信息**:
- 版本号: v2.1.4
- 发布时间: 2025年9月21日
- 标签: `v2.1.4`
- 分支: `main`

## 🎯 快速开始

### 方法1: 直接拉取标签（推荐）
```bash
git clone https://github.com/alvaxu/photo-org.git
cd photo-org
git checkout v2.1.4
```

### 方法2: 拉取最新代码后切换
```bash
git clone https://github.com/alvaxu/photo-org.git
cd photo-org
git pull origin v2.1.4
```

## 📥 详细拉取方法

### 前置条件

确保系统已安装 Git（版本 2.0+ 推荐）：
```bash
git --version
```

### 方法 A: 首次克隆仓库

#### 1. 克隆完整仓库
```bash
git clone https://github.com/alvaxu/photo-org.git
cd photo-org
```

#### 2. 拉取所有标签
```bash
git fetch --tags
```

#### 3. 切换到 v2.1.4 版本
```bash
git checkout v2.1.4
```

#### 4. 验证版本
```bash
git log --oneline -1
# 应该显示: 1b1670d merge: 合并develop分支到main分支 - v2.1.4版本
```

### 方法 B: 更新现有仓库

#### 场景1: 从其他版本切换到 v2.1.4
```bash
# 确保在项目目录内
cd /path/to/photo-org

# 拉取最新标签
git fetch --tags

# 切换到 v2.1.4
git checkout v2.1.4
```

#### 场景2: 从 main 分支获取
```bash
# 确保在项目目录内
cd /path/to/photo-org

# 拉取 main 分支最新代码
git pull origin main

# 如果需要创建本地标签
git tag v2.1.4
```

#### 场景3: 从 develop 分支合并
```bash
# 确保在项目目录内
cd /path/to/photo-org

# 合并 main 分支的 v2.1.4 内容
git merge origin/main
```

### 方法 C: 远程拉取特定版本

#### 1. 添加远程仓库（如果还没有）
```bash
git remote add origin https://github.com/alvaxu/photo-org.git
```

#### 2. 拉取特定标签
```bash
git pull origin v2.1.4
```

#### 3. 或者直接拉取标签
```bash
git fetch origin tag v2.1.4
git checkout v2.1.4
```

## 🔍 版本验证

### 验证当前版本
```bash
# 查看当前提交信息
git log --oneline -3

# 查看当前分支/标签
git branch -v
git tag --points-at HEAD

# 查看版本文件
cat app/__init__.py | grep __version__
```

### 验证 v2.1.4 特性

拉取完成后，验证以下关键修复是否包含：

1. **PyInstaller兼容性修复**:
   - 修复 `UnboundLocalError` 错误
   - 配置文件路径正确处理

2. **配置管理功能**:
   - API密钥显示/隐藏切换
   - 模态框状态正确重置
   - 缩略图质量/尺寸设置生效

3. **版本信息**:
   - `setup.py` 版本号: 2.1.4
   - `app/__init__.py` 版本号: 2.1.4

## 🛠️ 故障排除

### 问题1: 标签不存在
```bash
# 重新拉取所有标签
git fetch --tags --force

# 查看可用标签
git tag -l | grep v2
```

### 问题2: 切换失败
```bash
# 清理工作目录
git status
git stash  # 如果有未提交的修改

# 强制切换
git checkout -f v2.1.4
```

### 问题3: 网络问题
```bash
# 使用代理（如果需要）
git config --global http.proxy http://proxy.example.com:8080

# 或者使用 SSH（如果配置了）
git clone git@github.com:alvaxu/photo-org.git
```

### 问题4: 权限问题
```bash
# 检查远程仓库配置
git remote -v

# 重新配置远程仓库
git remote set-url origin https://github.com/alvaxu/photo-org.git
```

## 📊 版本对比

| 版本 | 发布时间 | 主要改进 | 兼容性 |
|------|----------|----------|--------|
| v2.1.4 | 2025-09-21 | PyInstaller修复、配置管理完善 | 完全兼容 |
| v2.1 | 2025-09-15 | 基础功能完善 | 兼容 |
| v2.0.1 | 2025-09-01 | 稳定性修复 | 兼容 |
| v2.0.0 | 2025-08-15 | 架构重构 | 需要升级 |

## 🚀 下一步

获取代码后，参考以下文档继续：

1. **[开发环境搭建指南](开发环境搭建指南.md)** - 配置开发环境
2. **[安装包制作完整指南](安装包制作完整指南.md)** - 制作发布包
3. **[完整使用指南](完整使用指南.md)** - 了解系统功能
4. **[API接口详细文档](API接口详细文档.md)** - 接口开发参考

## 📞 技术支持

如遇到问题，请：

1. 检查本文档的故障排除部分
2. 查看项目 Issues: https://github.com/alvaxu/photo-org/issues
3. 提交新的 Issue 描述问题

---

**最后更新**: 2025年9月21日
**文档版本**: v1.0
**适用版本**: v2.1.4
