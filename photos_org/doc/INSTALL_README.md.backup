# 家庭版智能照片系统 - 安装指南

## 📦 安装包内容

解压后您将获得以下文件结构：

```
PhotoSystem/
├── PhotoSystem.exe        # 主程序可执行文件
├── startup.bat            # 启动脚本
├── installer.py           # 交互式安装脚本
├── install.bat            # Windows安装脚本
├── install.sh             # Linux/macOS安装脚本
├── config.json            # 配置文件
├── config_default.json    # 默认配置文件
├── app/                   # 应用程序目录
├── static/                # 前端静态文件
├── templates/             # HTML模板文件
├── README.md              # 项目说明
└── INSTALL_README.md      # 本安装指南
```

## 🚀 安装步骤

### Windows 用户

1. **解压安装包**
   - 将下载的安装包解压到任意目录

2. **运行安装程序**
   ```bash
   # 双击运行 install.bat
   # 或在命令行中运行：
   install.bat
   ```

3. **按照提示完成安装**
   - 选择安装路径（默认：`C:\Program Files\PhotoSystem`）
   - 选择照片存储路径（默认：`C:\Users\用户名\Documents\PhotoSystem`）

4. **启动程序**
   - 双击桌面快捷方式"PhotoSystem"
   - 或运行安装目录中的 `startup.bat`

### Linux/macOS 用户

1. **解压安装包**
   ```bash
   tar -xzf PhotoSystem.tar.gz
   cd PhotoSystem
   ```

2. **运行安装程序**
   ```bash
   # 方法1: 双击 install.sh
   # 方法2: 命令行运行
   chmod +x install.sh
   ./install.sh
   ```

3. **按照提示完成安装**
   - 选择安装路径（默认：`/opt/photosystem`）
   - 选择照片存储路径（默认：`~/PhotoSystem`）

4. **启动程序**
   - 点击桌面快捷图标
   - 或运行 `./startup.sh`

## ⚙️ 安装选项说明

### 安装路径
- **建议位置**: `C:\Program Files\PhotoSystem` (Windows)
- **权限要求**: 需要管理员权限写入系统目录
- **可选位置**: 任何您有写入权限的目录

### 存储路径
- **照片存储位置**: 所有上传的照片将保存在此目录
- **建议位置**: `~/Documents/PhotoSystem` (用户文档目录)
- **容量要求**: 根据您的照片数量预留足够空间
- **备份建议**: 选择易于备份的位置

## 🔧 系统要求

### 最低系统要求
- **操作系统**: Windows 10+ / Ubuntu 18.04+ / macOS 10.15+
- **内存**: 4GB RAM
- **磁盘空间**: 400MB (程序) + 照片存储空间
- **网络**: 稳定的网络连接（用于AI分析功能）

### 推荐配置
- **操作系统**: Windows 11 / Ubuntu 20.04+ / macOS 12+
- **内存**: 8GB RAM
- **磁盘空间**: 1GB+ (程序) + 充足的照片存储空间
- **网络**: 稳定的网络连接（用于AI分析功能）

## 🌐 使用说明

### 首次启动
1. 运行安装程序创建的快捷方式
2. 等待系统初始化完成
3. 浏览器访问 `http://localhost:8000`
4. 开始使用智能照片管理系统

### 功能介绍
- ✅ **智能照片导入**: 支持批量导入和文件夹扫描
- ✅ **AI内容分析**: 自动识别场景、人物、物体
- ✅ **智能分类**: 自动为照片添加标签和分类
- ✅ **高级搜索**: 支持全文搜索和条件筛选
- ✅ **相似照片查找**: 快速发现重复照片
- ✅ **多设备同步**: 支持家庭成员共同管理

## 🛠️ 高级配置

### 修改存储路径
如果需要修改照片存储路径：

1. 停止运行中的程序
2. 编辑 `config.json` 文件
3. 修改 `storage.base_path` 配置项
4. 重新启动程序

### 网络配置
默认监听地址：`http://0.0.0.0:8000`
如需修改端口或其他网络设置，请编辑配置文件。

## ❓ 常见问题

### Q: 安装过程中出现权限错误？
A: 请确保以管理员权限运行安装程序，或选择用户有写入权限的安装目录。

### Q: 如何卸载程序？
A: 请按照以下步骤完整卸载PhotoSystem：

#### Windows 用户卸载步骤：
1. **停止程序运行**
   - 关闭所有打开的PhotoSystem窗口
   - 在任务管理器中结束PhotoSystem.exe进程

2. **删除桌面快捷方式**
   - 在桌面找到PhotoSystem快捷方式，右键删除

3. **删除安装目录**
   - 找到安装目录（默认：`C:\Program Files\PhotoSystem`）
   - 删除整个PhotoSystem文件夹

4. **删除开始菜单项**（如果存在）
   - 打开开始菜单
   - 找到PhotoSystem文件夹，右键删除

5. **清理用户数据**（可选）
   - 删除照片存储目录（默认：`~/Documents/PhotoSystem`）
   - 删除配置文件目录（如果有自定义配置）

#### Linux/macOS 用户卸载步骤：
1. **停止程序运行**
   - 关闭所有PhotoSystem窗口
   - 使用 `pkill PhotoSystem` 结束进程

2. **删除桌面快捷方式**
   - 删除桌面上的PhotoSystem图标

3. **删除安装目录**
   - 删除安装目录（默认：`/opt/photosystem`）

4. **清理用户数据**（可选）
   - 删除 `~/.local/share/applications/photosystem.desktop`
   - 删除照片存储目录（默认：`~/PhotoSystem`）

#### 快速卸载脚本（推荐）
我们提供了自动化的卸载脚本，可以一键完成卸载过程：

**Windows**:
```batch
# 在安装目录中找到 uninstall.bat 并运行
uninstall.bat
```
**脚本功能：**
- 自动停止PhotoSystem进程
- 删除桌面快捷方式
- 删除开始菜单项
- 删除安装目录
- 保留用户照片数据安全

**Linux/macOS**:
```bash
# 在安装目录中找到 uninstall.sh 并运行
chmod +x uninstall.sh
./uninstall.sh
```
**脚本功能：**
- 自动停止PhotoSystem进程
- 删除桌面图标和快捷方式
- 删除安装目录
- 保留用户照片数据安全

#### 注意事项：
- ✅ **数据安全**: 卸载前请备份重要的照片数据
- ✅ **权限要求**: 删除系统目录可能需要管理员权限
- ✅ **完整清理**: 建议重启电脑以确保完全清理
- ✅ **重新安装**: 如需重新安装，请先完成上述清理步骤

### Q: 忘记存储路径怎么办？
A: 查看 `config.json` 文件中的 `storage.base_path` 配置项。

### Q: 程序启动失败？
A: 检查端口8000是否被占用，或查看程序日志文件。

### Q: 启动时出现模块导入错误？
A: 这是PyInstaller打包环境的常见问题，请确保：
1. 使用安装程序进行完整安装
2. 不要手动移动或修改安装目录的文件结构
3. 如果问题持续，请重新运行安装程序

### Q: Linux/macOS下无法启动？
A: 请确保：
1. 安装脚本具有执行权限：`chmod +x install.sh`
2. Python环境配置正确
3. 系统满足最低要求（Ubuntu 18.04+ 或 macOS 10.15+）

## 📞 技术支持

如遇到问题，请：
1. 查看程序日志：`logs/app.log`
2. 检查配置文件：`config.json`
3. 联系技术支持：alva_xu@sina.com

---

**祝您使用愉快！** 🎉

*家庭版智能照片系统 - 让家庭回忆永不丢失*
