# å®¶åº­å•æœºç‰ˆæ™ºèƒ½ç…§ç‰‡æ•´ç†ç³»ç»Ÿ - APIæ¥å£è¯¦ç»†æ–‡æ¡£

## ä¸€ã€æ–‡æ¡£åŸºç¡€ä¿¡æ¯

| é¡¹ç›®åç§° | å®¶åº­å•æœºç‰ˆæ™ºèƒ½ç…§ç‰‡æ•´ç†ç³»ç»Ÿ | æ–‡æ¡£ç±»å‹ | APIæ¥å£è¯¦ç»†æ–‡æ¡£ |
| -------- | ------------------------- | -------- | -------------- |
| æ–‡æ¡£ç‰ˆæœ¬ | V2.0 | æ–‡æ¡£çŠ¶æ€ | â˜‘ è‰ç¨¿ â–¡ è¯„å®¡ä¸­ â–¡ å·²ç¡®è®¤ â–¡ å·²å½’æ¡£ |
| ç¼–å†™äºº | AIåŠ©æ‰‹ | ç¼–å†™æ—¥æœŸ | 2025å¹´1æœˆ9æ—¥ |
| å…³è”æ–‡æ¡£ | ã€Šå‰ç«¯ç•Œé¢è®¾è®¡æ–‡æ¡£ã€‹ã€Šæœç´¢æ£€ç´¢æ¨¡å—è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€‹ã€Šç…§ç‰‡å¯¼å…¥æ¨¡å—è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€‹ | | |

## äºŒã€APIæ¦‚è§ˆ

### 2.1 å®ç°çŠ¶æ€æ€»è§ˆ

| æ¨¡å— | å®ç°çŠ¶æ€ | æ¥å£æ•°é‡ | è¯´æ˜ |
|------|----------|----------|------|
| ç…§ç‰‡ç®¡ç†API | âœ… å®Œå…¨å®ç° | 8ä¸ª | ç…§ç‰‡CRUDã€æ‰¹é‡æ“ä½œã€ç»Ÿè®¡ |
| æœç´¢æ£€ç´¢API | ğŸ”„ éƒ¨åˆ†å®ç° | 7ä¸ª | åŸºç¡€æœç´¢å’Œç›¸ä¼¼ç…§ç‰‡æœç´¢å·²å®ç°ï¼Œæ™ºèƒ½æ¨èå¾…å¼€å‘ |
| æ ‡ç­¾åˆ†ç±»API | âœ… å®Œå…¨å®ç° | 14ä¸ª | æ ‡ç­¾å’Œåˆ†ç±»çš„å®Œæ•´CRUDæ“ä½œ |
| æ™ºèƒ½åˆ†æAPI | âœ… å®Œå…¨å®ç° | 7ä¸ª | AIåˆ†æã€è´¨é‡è¯„ä¼°ã€é‡å¤æ£€æµ‹ |
| å­˜å‚¨ç®¡ç†API | âœ… å®Œå…¨å®ç° | 8ä¸ª | å­˜å‚¨ç›‘æ§ã€å¤‡ä»½æ¢å¤ã€ç»´æŠ¤ |
| ç³»ç»Ÿç®¡ç†API | âœ… å®Œå…¨å®ç° | 1ä¸ª | å¥åº·æ£€æŸ¥ |
| å¯¼å…¥ç®¡ç†API | âœ… å®Œå…¨å®ç° | 6ä¸ª | æ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶å¤¹æ‰«æ |
| FTSç®¡ç†API | âœ… å®Œå…¨å®ç° | 6ä¸ª | FTSè¡¨ç®¡ç†ã€æ•°æ®åŒæ­¥ã€æœç´¢æµ‹è¯• |

### 2.2 APIè®¾è®¡åŸåˆ™

- **RESTfulè®¾è®¡**ï¼šéµå¾ªRESTful APIè®¾è®¡è§„èŒƒ
- **å®é™…å®ç°ä¼˜å…ˆ**ï¼šæ–‡æ¡£å®Œå…¨åŸºäºå®é™…ä»£ç å®ç°
- **çŠ¶æ€æ ‡è®°æ¸…æ™°**ï¼šæ˜ç¡®æ ‡è®°æ¯ä¸ªæ¥å£çš„å®ç°çŠ¶æ€
- **å¼€å‘æŒ‡å¯¼æ˜ç¡®**ï¼šä¸ºåç»­é¡µé¢å¼€å‘æä¾›å…·ä½“æŒ‡å¯¼
- **é”™è¯¯å¤„ç†ç»Ÿä¸€**ï¼šä½¿ç”¨FastAPIæ ‡å‡†é”™è¯¯å¤„ç†

### 2.3 åŸºç¡€ä¿¡æ¯

- **åŸºç¡€URL**ï¼š`http://localhost:8000/api/v1`
- **è®¤è¯æ–¹å¼**ï¼šæ— éœ€è®¤è¯ï¼ˆå•ç”¨æˆ·å®¶åº­ä½¿ç”¨ï¼‰
- **æ•°æ®æ ¼å¼**ï¼šJSON
- **å­—ç¬¦ç¼–ç **ï¼šUTF-8
- **æ—¶é—´æ ¼å¼**ï¼šISO 8601 (YYYY-MM-DDTHH:mm:ssZ)
- **æ¡†æ¶**ï¼šFastAPI + SQLAlchemy

### 2.4 å®é™…å“åº”æ ¼å¼

#### 2.4.1 æ ‡å‡†æˆåŠŸå“åº”ï¼ˆå®é™…ä½¿ç”¨ï¼‰
```json
{
  "photos": [...],
  "total": 7,
  "skip": 0,
  "limit": 50,
  "has_more": false
}
```

#### 2.4.2 é”™è¯¯å“åº”ï¼ˆFastAPIæ ‡å‡†ï¼‰
```json
{
  "detail": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

#### 2.4.3 åˆ†é¡µå“åº”ï¼ˆå®é™…å®ç°ï¼‰
```json
{
  "items": [...],
      "total": 100,
  "skip": 0,
  "limit": 20,
  "has_more": true
}
```

### 2.5 å¼€å‘æŒ‡å¯¼

#### 2.5.1 åç»­é¡µé¢å¼€å‘ä¼˜å…ˆçº§
1. **é«˜çº§æœç´¢é¡µé¢**ï¼šåŸºäºç°æœ‰æœç´¢APIæ‰©å±•
2. **è®¾ç½®ç®¡ç†é¡µé¢**ï¼šåŸºäºç³»ç»Ÿé…ç½®API
3. **ç›¸å†Œç®¡ç†é¡µé¢**ï¼šåŸºäºåˆ†ç±»ç®¡ç†API

#### 2.5.2 æ¥å£ä½¿ç”¨å»ºè®®
- **ç…§ç‰‡ç®¡ç†**ï¼šä½¿ç”¨ `/api/v1/photos` ç³»åˆ—æ¥å£
- **æœç´¢åŠŸèƒ½**ï¼šä½¿ç”¨ `/api/v1/search` ç³»åˆ—æ¥å£
- **æ ‡ç­¾åˆ†ç±»**ï¼šä½¿ç”¨ `/api/v1/tags` å’Œ `/api/v1/categories` æ¥å£
- **æ‰¹é‡æ“ä½œ**ï¼šä¼˜å…ˆä½¿ç”¨æ‰¹é‡æ¥å£æé«˜æ•ˆç‡

## ä¸‰ã€ç…§ç‰‡ç®¡ç†API âœ… å®Œå…¨å®ç°

### 3.1 ç…§ç‰‡æŸ¥è¯¢æ¥å£

#### 3.1.1 è·å–ç…§ç‰‡åˆ—è¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/photos`
**åŠŸèƒ½æè¿°**ï¼šè·å–ç…§ç‰‡åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰å’Œæ’åº

**å®é™…è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| skip | integer | å¦ | 0 | è·³è¿‡çš„è®°å½•æ•° |
| limit | integer | å¦ | 50 | è¿”å›çš„è®°å½•æ•°ï¼Œæœ€å¤§1000 |
| search | string | å¦ | null | æœç´¢å…³é”®è¯ |
| sort_by | string | å¦ | "created_at" | æ’åºå­—æ®µ |
| sort_order | string | å¦ | "desc" | æ’åºé¡ºåº (asc/desc) |
| filters | string | å¦ | null | ç­›é€‰æ¡ä»¶JSONå­—ç¬¦ä¸² |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photos": [
    {
      "id": 1,
      "filename": "IMG_001.jpg",
      "file_path": "/storage/photos/photo1.jpg",
      "thumbnail_path": "/storage/thumbnails/photo1.jpg",
      "file_size": 2621440,
      "width": 4032,
      "height": 3024,
      "format": "JPG",
      "status": "completed",
      "description": "ç…§ç‰‡æè¿°",
      "created_at": "2025-01-01T00:00:00Z",
      "updated_at": "2025-01-01T00:00:00Z",
      "tags": ["ç”Ÿæ—¥", "è›‹ç³•"],
      "categories": ["å®¶åº­", "èšä¼š"],
      "analysis": {
        "description": "ä¸€ä½å¹´è½»å¥³æ€§ååœ¨å®¤å†…ï¼Œé¢å‰æ˜¯ä¸€ä¸ªè£…é¥°æœ‰ç»¿è‰²æ°´æœå’Œç‚¹ç‡ƒèœ¡çƒ›çš„ç”Ÿæ—¥è›‹ç³•",
        "scene_type": "å®¤å†…",
        "objects": ["ç”Ÿæ—¥è›‹ç³•", "èœ¡çƒ›", "çœ¼é•œ"],
        "people_count": 1,
        "emotion": "æ¬¢ä¹",
        "tags": ["ç”Ÿæ—¥", "åº†ç¥", "å®¤å†…", "è›‹ç³•", "è®¸æ„¿"],
        "confidence": 0.95,
        "type": "content"
      },
      "quality": {
        "quality_score": 73.48,
        "quality_level": "è‰¯å¥½",
        "sharpness_score": 34.03,
        "brightness_score": 100.0,
        "contrast_score": 92.46,
        "color_score": 91.36,
        "composition_score": 73.85,
        "technical_issues": {
          "issues": [],
          "count": 0,
          "has_issues": false
        },
        "assessed_at": "2025-09-10T08:35:54"
      }
    }
  ],
  "total": 7,
  "skip": 0,
  "limit": 50,
  "has_more": false
}
```

#### 3.1.2 è·å–ç…§ç‰‡è¯¦æƒ… âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/photos/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–æŒ‡å®šç…§ç‰‡çš„è¯¦ç»†ä¿¡æ¯

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
    "id": 1,
    "filename": "IMG_001.jpg",
    "original_path": "originals/2023/12/19/20231219_143025_IMG_001.jpg",
    "thumbnail_path": "thumbnails/2023/12/19/1_IMG_001_thumb.jpg",
    "taken_at": "2023-12-19T14:30:25Z",
    "file_size": 2621440,
    "width": 4032,
    "height": 3024,
    "format": "JPEG",
    "camera_make": "Apple",
    "camera_model": "iPhone 13 Pro",
    "quality_score": 85,
    "scene_type": "å®¤å†…èšä¼š",
    "description": "å®¶åº­æˆå‘˜åœ¨å®¢å…åº†ç¥ç”Ÿæ—¥",
    "categories": ["å®¶åº­", "ç”Ÿæ—¥"],
    "tags": ["ç”Ÿæ—¥", "è›‹ç³•", "èœ¡çƒ›"],
    "created_at": "2023-12-19T14:35:00Z",
    "updated_at": "2023-12-19T14:40:00Z"
  }
```

### 3.2 ç…§ç‰‡æ“ä½œæ¥å£

#### 3.2.1 æ›´æ–°ç…§ç‰‡ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`PUT /api/v1/photos/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šæ›´æ–°ç…§ç‰‡çš„æè¿°ã€æ ‡ç­¾ã€åˆ†ç±»ç­‰ä¿¡æ¯

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**è¯·æ±‚ä½“**ï¼š
```json
{
  "description": "æ–°çš„ç…§ç‰‡æè¿°",
  "tags": ["æ–°æ ‡ç­¾1", "æ–°æ ‡ç­¾2"],
  "categories": [1, 2]
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "id": 1,
  "filename": "IMG_001.jpg",
  "description": "æ–°çš„ç…§ç‰‡æè¿°",
  "tags": ["æ–°æ ‡ç­¾1", "æ–°æ ‡ç­¾2"],
  "categories": ["å®¶åº­", "ç”Ÿæ—¥"],
  "updated_at": "2025-01-01T00:00:00Z"
}
```

#### 3.2.2 åˆ é™¤ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`DELETE /api/v1/photos/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šåˆ é™¤æŒ‡å®šç…§ç‰‡

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| delete_file | boolean | true | æ˜¯å¦åˆ é™¤ç‰©ç†æ–‡ä»¶ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "message": "ç…§ç‰‡åˆ é™¤æˆåŠŸ",
  "photo_id": 1
}
```

#### 3.2.3 æ‰¹é‡åˆ é™¤ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/photos/batch-delete`
**åŠŸèƒ½æè¿°**ï¼šæ‰¹é‡åˆ é™¤ç…§ç‰‡

**è¯·æ±‚ä½“**ï¼š
```json
{
  "photo_ids": [1, 2, 3],
  "delete_files": true
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "total_requested": 3,
  "successful_deletions": 3,
  "failed_deletions": []
}
```

### 3.3 ç…§ç‰‡ç»Ÿè®¡æ¥å£

#### 3.3.1 è·å–ç…§ç‰‡ç»Ÿè®¡ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/photos/statistics`
**åŠŸèƒ½æè¿°**ï¼šè·å–ç…§ç‰‡ç»Ÿè®¡ä¿¡æ¯

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "total_photos": 150,
  "total_size": 1073741824,
  "total_size_mb": 1024.0,
  "status_distribution": {
    "completed": 120,
    "processing": 20,
    "failed": 10
  },
  "format_distribution": {
    "JPG": 100,
    "PNG": 30,
    "HEIC": 20
  },
  "yearly_distribution": {
    "2023": 100,
    "2024": 50
  },
  "quality_distribution": {
    "ä¼˜ç§€": 25,
    "è‰¯å¥½": 85,
    "ä¸€èˆ¬": 35,
    "è¾ƒå·®": 5
  },
  "last_updated": "2025-01-01T00:00:00Z"
}
```

#### 3.3.2 æŒ‰åˆ†ç±»è·å–ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/photos/by-category/{category_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–æŒ‡å®šåˆ†ç±»çš„ç…§ç‰‡

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| category_id | integer | åˆ†ç±»ID |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| skip | integer | 0 | è·³è¿‡çš„è®°å½•æ•° |
| limit | integer | 50 | è¿”å›çš„è®°å½•æ•° |

#### 3.3.3 æŒ‰æ ‡ç­¾è·å–ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/photos/by-tag/{tag_name}`
**åŠŸèƒ½æè¿°**ï¼šè·å–æŒ‡å®šæ ‡ç­¾çš„ç…§ç‰‡

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| tag_name | string | æ ‡ç­¾åç§° |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| skip | integer | 0 | è·³è¿‡çš„è®°å½•æ•° |
| limit | integer | 50 | è¿”å›çš„è®°å½•æ•° |

### 3.4 æ™ºèƒ½å¤„ç†æ¥å£

#### 3.4.1 æ™ºèƒ½å¤„ç†ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/photos/batch-process`
**åŠŸèƒ½æè¿°**ï¼šæ™ºèƒ½å¤„ç†ç…§ç‰‡ï¼ˆAIåˆ†æã€è´¨é‡è¯„ä¼°ç­‰ï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "photo_ids": [1, 2, 3],
  "analysis_types": ["content", "quality", "duplicate"]
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "message": "æ™ºèƒ½å¤„ç†ä»»åŠ¡å·²å¯åŠ¨",
  "task_id": "batch_process_123",
  "total_photos": 50,
  "estimated_time": 300
}
```

## å››ã€å¯¼å…¥ç®¡ç†API âœ… å®Œå…¨å®ç°

### 4.1 æ–‡ä»¶å¯¼å…¥æ¥å£

#### 4.1.1 æ‰«ææ–‡ä»¶å¤¹å¯¼å…¥ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/import/scan-folder`
**åŠŸèƒ½æè¿°**ï¼šæ‰«ææŒ‡å®šæ–‡ä»¶å¤¹ï¼Œå¯¼å…¥å…¶ä¸­çš„ç…§ç‰‡æ–‡ä»¶

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| folder_path | string | æ˜¯ | - | è¦æ‰«æçš„æ–‡ä»¶å¤¹è·¯å¾„ |
| recursive | boolean | å¦ | true | æ˜¯å¦é€’å½’æ‰«æå­æ–‡ä»¶å¤¹ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "message": "æˆåŠŸå¯¼å…¥7å¼ ç…§ç‰‡",
  "scanned_files": 7,
  "imported_photos": 7,
  "duplicate_files": 0,
  "failed_files": 0
}
```

#### 4.1.2 ä¸Šä¼ ç…§ç‰‡æ–‡ä»¶ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/import/upload`
**åŠŸèƒ½æè¿°**ï¼šä¸Šä¼ å•å¼ æˆ–å¤šå¼ ç…§ç‰‡æ–‡ä»¶

**è¯·æ±‚å‚æ•°**ï¼š
- Content-Type: multipart/form-data
- files: ç…§ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒå¤šä¸ªï¼‰

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "message": "ç…§ç‰‡ä¸Šä¼ æˆåŠŸ",
    "uploaded": [
      {
        "id": 1,
        "filename": "IMG_001.jpg",
        "status": "processing"
      }
    ],
  "failed": [],
  "duplicate_detected": []
}
```

#### 4.1.3 å¤„ç†å•ä¸ªæ–‡ä»¶ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/import/process-single`
**åŠŸèƒ½æè¿°**ï¼šå¤„ç†å•ä¸ªæ–‡ä»¶ï¼ˆç”¨äºé‡æ–°å¤„ç†ï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "file_path": "/path/to/file.jpg"
}
```

#### 4.1.4 è·å–æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/import/supported-formats`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ”¯æŒçš„æ–‡ä»¶æ ¼å¼åˆ—è¡¨

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "supported_formats": [
    {
      "extension": ".jpg",
      "mime_type": "image/jpeg",
      "description": "JPEGå›¾ç‰‡æ ¼å¼"
    },
    {
      "extension": ".png",
      "mime_type": "image/png",
      "description": "PNGå›¾ç‰‡æ ¼å¼"
    }
  ]
}
```

#### 4.1.5 è·å–å¯¼å…¥çŠ¶æ€ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/import/import-status`
**åŠŸèƒ½æè¿°**ï¼šè·å–å½“å‰å¯¼å…¥çŠ¶æ€

#### 4.1.6 è·å–æ‰«æä»»åŠ¡çŠ¶æ€ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/import/scan-status/{task_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ‰«æä»»åŠ¡çŠ¶æ€

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| task_id | string | ä»»åŠ¡ID |

## äº”ã€æ™ºèƒ½åˆ†æAPI âœ… å®Œå…¨å®ç°

### 5.1 åˆ†ææ§åˆ¶æ¥å£

#### 5.1.1 è§¦å‘ç…§ç‰‡åˆ†æ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/analysis/analyze`
**åŠŸèƒ½æè¿°**ï¼šè§¦å‘æŒ‡å®šç…§ç‰‡çš„æ™ºèƒ½åˆ†æ

**è¯·æ±‚ä½“**ï¼š
```json
{
  "photo_id": 1
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photo_id": 1,
  "status": "processing",
  "message": "åˆ†æä»»åŠ¡å·²æäº¤",
  "estimated_time": 30
}
```

#### 5.1.2 æ‰¹é‡åˆ†æç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/analysis/batch-analyze`
**åŠŸèƒ½æè¿°**ï¼šæ‰¹é‡åˆ†æå¤šå¼ ç…§ç‰‡

**è¯·æ±‚ä½“**ï¼š
```json
{
  "photo_ids": [1, 2, 3],
  "analysis_type": "full"
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "task_id": "batch_analyze_123",
  "total_photos": 3,
  "processing_status": "started",
  "estimated_time": 9
}
```

#### 5.1.3 è·å–åˆ†æçŠ¶æ€ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/analysis/status/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–ç…§ç‰‡åˆ†æçŠ¶æ€

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photo_id": 1,
  "status": "completed",
  "message": "åˆ†æå®Œæˆ",
  "progress": 100
}
```

#### 5.1.4 è·å–åˆ†æç»“æœ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/analysis/results/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–ç…§ç‰‡åˆ†æç»“æœ

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photo_id": 1,
  "analysis_type": "content",
  "result": {
    "description": "ä¸€ä½å¹´è½»å¥³æ€§ååœ¨å®¤å†…ï¼Œé¢å‰æ˜¯ä¸€ä¸ªè£…é¥°æœ‰ç»¿è‰²æ°´æœå’Œç‚¹ç‡ƒèœ¡çƒ›çš„ç”Ÿæ—¥è›‹ç³•",
    "scene_type": "å®¤å†…",
    "objects": ["ç”Ÿæ—¥è›‹ç³•", "èœ¡çƒ›", "çœ¼é•œ"],
    "people_count": 1,
    "emotion": "æ¬¢ä¹",
    "tags": ["ç”Ÿæ—¥", "åº†ç¥", "å®¤å†…", "è›‹ç³•", "è®¸æ„¿"],
    "confidence": 0.95
  },
  "quality": {
    "quality_score": 73.48,
    "quality_level": "è‰¯å¥½",
    "sharpness_score": 34.03,
    "brightness_score": 100.0,
    "contrast_score": 92.46,
    "color_score": 91.36,
    "composition_score": 73.85
  }
}
```

### 5.2 é‡å¤æ£€æµ‹æ¥å£

#### 5.2.1 æ£€æµ‹é‡å¤ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/analysis/duplicates/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šæ£€æµ‹æŒ‡å®šç…§ç‰‡çš„é‡å¤é¡¹

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | ç…§ç‰‡ID |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photo_id": 1,
  "duplicates": [
    {
      "photo_id": 5,
      "similarity": 0.95,
      "filename": "IMG_005.jpg"
    }
  ],
  "total_duplicates": 1
}
```

### 5.3 å…¶ä»–åˆ†ææ¥å£

#### 5.3.1 ç”Ÿæˆç…§ç‰‡æ ‡é¢˜ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/analysis/caption`
**åŠŸèƒ½æè¿°**ï¼šä¸ºç…§ç‰‡ç”Ÿæˆæ ‡é¢˜

**è¯·æ±‚ä½“**ï¼š
```json
{
  "photo_id": 1,
  "style": "descriptive"
}
```

#### 5.3.2 è·å–åˆ†æé˜Ÿåˆ—çŠ¶æ€ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/analysis/queue/status`
**åŠŸèƒ½æè¿°**ï¼šè·å–åˆ†æé˜Ÿåˆ—çŠ¶æ€

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| initial_total | integer | null | åˆå§‹æ€»æ•° |

## å…­ã€åˆ†ç±»æ ‡ç­¾API âœ… å®Œå…¨å®ç°

### 6.1 åˆ†ç±»ç®¡ç†æ¥å£

#### 6.1.1 è·å–åˆ†ç±»åˆ—è¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/categories`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ‰€æœ‰åˆ†ç±»åŠå…¶ç»Ÿè®¡ä¿¡æ¯

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| skip | integer | 0 | è·³è¿‡çš„è®°å½•æ•° |
| limit | integer | 100 | è¿”å›çš„è®°å½•æ•° |
| search | string | null | æœç´¢å…³é”®è¯ |
| parent_id | integer | null | çˆ¶åˆ†ç±»ID |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
[
      {
        "id": 1,
        "name": "å®¶åº­",
    "description": "å®¶åº­ç›¸å…³ç…§ç‰‡",
        "photo_count": 45,
    "parent_id": null,
    "created_at": "2023-12-19T10:00:00Z",
    "updated_at": "2023-12-19T10:00:00Z"
      },
      {
        "id": 2,
        "name": "æ—…è¡Œ",
    "description": "æ—…è¡Œç›¸å…³ç…§ç‰‡",
        "photo_count": 23,
    "parent_id": null,
    "created_at": "2023-12-19T10:05:00Z",
    "updated_at": "2023-12-19T10:05:00Z"
  }
]
```

#### 6.1.2 è·å–åˆ†ç±»æ ‘ç»“æ„ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/categories/tree`
**åŠŸèƒ½æè¿°**ï¼šè·å–åˆ†ç±»æ ‘ç»“æ„

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
[
  {
    "id": 1,
    "name": "å®¶åº­",
    "children": [
      {
    "id": 3,
    "name": "ç”Ÿæ—¥",
        "children": []
      }
    ]
  }
]
```

#### 6.1.3 è·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/categories/stats`
**åŠŸèƒ½æè¿°**ï¼šè·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯

#### 6.1.4 è·å–çƒ­é—¨åˆ†ç±» âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/categories/popular`
**åŠŸèƒ½æè¿°**ï¼šè·å–çƒ­é—¨åˆ†ç±»

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| limit | integer | 20 | è¿”å›çš„åˆ†ç±»æ•°é‡ |

#### 6.1.5 è·å–åˆ†ç±»è¯¦æƒ… âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/categories/{category_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–åˆ†ç±»è¯¦æƒ…

#### 6.1.6 åˆ›å»ºåˆ†ç±» âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/categories`
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºæ–°åˆ†ç±»

**è¯·æ±‚ä½“**ï¼š
```json
{
  "name": "ç”Ÿæ—¥",
  "description": "ç”Ÿæ—¥ç›¸å…³çš„ç…§ç‰‡",
  "parent_id": 1
}
```

#### 6.1.7 æ›´æ–°åˆ†ç±» âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`PUT /api/v1/categories/{category_id}`
**åŠŸèƒ½æè¿°**ï¼šæ›´æ–°åˆ†ç±»ä¿¡æ¯

#### 6.1.8 åˆ é™¤åˆ†ç±» âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`DELETE /api/v1/categories/{category_id}`
**åŠŸèƒ½æè¿°**ï¼šåˆ é™¤åˆ†ç±»

### 6.2 æ ‡ç­¾ç®¡ç†æ¥å£

#### 6.2.1 è·å–æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/tags/stats`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯

#### 6.2.2 è·å–æ ‡ç­¾åˆ—è¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/tags`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ‰€æœ‰æ ‡ç­¾åŠå…¶ç»Ÿè®¡ä¿¡æ¯

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| skip | integer | 0 | è·³è¿‡çš„è®°å½•æ•° |
| limit | integer | 100 | è¿”å›çš„è®°å½•æ•° |
| search | string | null | æœç´¢å…³é”®è¯ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
[
      {
        "id": 1,
        "name": "ç”Ÿæ—¥",
    "description": "ç”Ÿæ—¥ç›¸å…³æ ‡ç­¾",
        "photo_count": 12,
    "created_at": "2023-12-19T10:00:00Z",
    "updated_at": "2023-12-19T10:00:00Z"
      },
      {
        "id": 2,
        "name": "è›‹ç³•",
    "description": "è›‹ç³•ç›¸å…³æ ‡ç­¾",
        "photo_count": 8,
    "created_at": "2023-12-19T10:05:00Z",
    "updated_at": "2023-12-19T10:05:00Z"
  }
]
```

#### 6.2.3 è·å–çƒ­é—¨æ ‡ç­¾ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/tags/popular`
**åŠŸèƒ½æè¿°**ï¼šè·å–çƒ­é—¨æ ‡ç­¾

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| limit | integer | 20 | è¿”å›çš„æ ‡ç­¾æ•°é‡ |

#### 6.2.4 è·å–æ ‡ç­¾è¯¦æƒ… âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/tags/{tag_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–æ ‡ç­¾è¯¦æƒ…

#### 6.2.5 åˆ›å»ºæ ‡ç­¾ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/tags`
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºæ–°æ ‡ç­¾

**è¯·æ±‚ä½“**ï¼š
```json
{
  "name": "ç”Ÿæ—¥",
  "description": "ç”Ÿæ—¥ç›¸å…³æ ‡ç­¾"
}
```

#### 6.2.6 æ›´æ–°æ ‡ç­¾ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`PUT /api/v1/tags/{tag_id}`
**åŠŸèƒ½æè¿°**ï¼šæ›´æ–°æ ‡ç­¾ä¿¡æ¯

#### 6.2.7 åˆ é™¤æ ‡ç­¾ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`DELETE /api/v1/tags/{tag_id}`
**åŠŸèƒ½æè¿°**ï¼šåˆ é™¤æ ‡ç­¾

## ä¸ƒã€æœç´¢æ£€ç´¢API ğŸ”„ éƒ¨åˆ†å®ç°

### 7.1 å·²å®ç°æœç´¢æ¥å£

#### 7.1.1 ç»¼åˆæœç´¢ç…§ç‰‡ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/photos`
**åŠŸèƒ½æè¿°**ï¼šç»¼åˆæœç´¢ç…§ç‰‡ï¼Œæ”¯æŒå¤šç§æœç´¢æ¡ä»¶ç»„åˆ

**å®é™…è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| keyword | string | å¦ | null | å…³é”®è¯æœç´¢ |
| search_type | string | å¦ | "all" | æœç´¢ç±»å‹ |
| camera_make | string | å¦ | null | ç›¸æœºå“ç‰Œ |
| camera_model | string | å¦ | null | ç›¸æœºå‹å· |
| date_from | date | å¦ | null | å¼€å§‹æ—¥æœŸ |
| date_to | date | å¦ | null | ç»“æŸæ—¥æœŸ |
| start_date | date | å¦ | null | è‡ªå®šä¹‰å¼€å§‹æ—¥æœŸ |
| end_date | date | å¦ | null | è‡ªå®šä¹‰ç»“æŸæ—¥æœŸ |
| date_filter | string | å¦ | null | æ—¥æœŸç­›é€‰ç±»å‹ |
| quality_min | float | å¦ | null | æœ€ä½è´¨é‡åˆ†æ•° (0-100) |
| quality_level | string | å¦ | null | è´¨é‡ç­‰çº§ |
| quality_filter | string | å¦ | null | è´¨é‡ç­›é€‰ |
| tags | array | å¦ | null | æ ‡ç­¾åˆ—è¡¨ |
| categories | array | å¦ | null | åˆ†ç±»åˆ—è¡¨ |
| location_lat | float | å¦ | null | çº¬åº¦ |
| location_lng | float | å¦ | null | ç»åº¦ |
| location_radius | float | å¦ | null | æœç´¢åŠå¾„(å…¬é‡Œ) |
| sort_by | string | å¦ | "taken_at" | æ’åºå­—æ®µ |
| sort_order | string | å¦ | "desc" | æ’åºé¡ºåº |
| limit | integer | å¦ | 50 | è¿”å›æ•°é‡ï¼Œæœ€å¤§200 |
| offset | integer | å¦ | 0 | åç§»é‡ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "photos": [
    {
      "id": 2,
      "filename": "184dae88f85397feddac19c9f628ea93.JPG",
      "file_path": "/storage/photos/photo2.jpg",
      "thumbnail_path": "/storage/thumbnails/photo2.jpg",
      "file_size": 2488864,
      "width": 4032,
      "height": 3024,
      "format": "JPG",
      "status": "completed",
      "description": "å®¤å†…åœºæ™¯ä¸­ï¼Œä¸€ä½è€å¹´å¥³æ€§å’Œä¸€ä½ä¸­å¹´ç”·æ€§ååœ¨æ¡Œå­å‰ï¼Œé¢å‰æ‘†æ”¾ç€ä¸€ä¸ªç”Ÿæ—¥è›‹ç³•",
      "created_at": "2025-09-10T08:35:52Z",
      "tags": ["ç”Ÿæ—¥", "å®¶åº­", "åº†ç¥", "å®¤å†…", "è€äºº"],
      "categories": ["å®¶åº­", "åº†ç¥"],
      "analysis": {
        "description": "å®¤å†…åœºæ™¯ä¸­ï¼Œä¸€ä½è€å¹´å¥³æ€§å’Œä¸€ä½ä¸­å¹´ç”·æ€§ååœ¨æ¡Œå­å‰ï¼Œé¢å‰æ‘†æ”¾ç€ä¸€ä¸ªç”Ÿæ—¥è›‹ç³•",
        "scene_type": "å®¤å†…",
        "objects": ["ç”Ÿæ—¥è›‹ç³•", "èœ¡çƒ›", "ä¹¦æ³•ä½œå“", "é¤æ¡Œ"],
        "people_count": 2,
        "emotion": "æ¬¢ä¹",
        "tags": ["ç”Ÿæ—¥", "å®¶åº­", "åº†ç¥", "å®¤å†…", "è€äºº", "ä¸­å¹´ç”·æ€§", "è›‹ç³•"],
        "confidence": 0.95,
        "type": "content"
      },
      "quality": {
        "quality_score": 78.2,
        "quality_level": "è‰¯å¥½",
        "sharpness_score": 45.8,
        "brightness_score": 95.2,
        "contrast_score": 88.9,
        "color_score": 87.6,
        "composition_score": 79.3,
        "technical_issues": {
          "issues": [],
          "count": 0,
          "has_issues": false
        },
        "assessed_at": "2025-09-10T08:35:54"
      }
    }
  ],
  "total": 5,
  "limit": 50,
  "offset": 0
}
```

#### 7.1.2 è·å–æœç´¢å»ºè®® âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/suggestions`
**åŠŸèƒ½æè¿°**ï¼šè·å–æœç´¢å»ºè®®

**å®é™…è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| prefix | string | æ˜¯ | - | æœç´¢å‰ç¼€ |
| search_type | string | å¦ | "all" | æœç´¢ç±»å‹ |
| limit | integer | å¦ | 10 | å»ºè®®æ•°é‡é™åˆ¶ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
    "tags": ["ç”Ÿæ—¥", "å®¶åº­", "åº†ç¥", "å®¤å†…"],
    "categories": ["å®¶åº­", "åº†ç¥", "èšä¼š"],
    "camera_makes": ["Canon", "Nikon", "Sony"],
    "camera_models": ["EOS 80D", "D750", "A7R"]
}
```

#### 7.1.3 è·å–æœç´¢ç»Ÿè®¡ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/stats`
**åŠŸèƒ½æè¿°**ï¼šè·å–æœç´¢ç»Ÿè®¡ä¿¡æ¯

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
    "total_photos": 150,
    "total_tags": 45,
    "total_categories": 12,
    "photos_by_quality": {
      "ä¼˜ç§€": 25,
      "è‰¯å¥½": 85,
      "ä¸€èˆ¬": 35,
      "è¾ƒå·®": 5
    },
    "photos_by_date": {
      "2023": 120,
      "2024": 25,
      "2025": 5
  }
}
```

#### 7.1.4 è·å–ç…§ç‰‡è¯¦æƒ…ï¼ˆæœç´¢æ¨¡å—ï¼‰ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/photos/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šè·å–ç…§ç‰‡è¯¦æƒ…ï¼ˆä¸ç…§ç‰‡ç®¡ç†APIé‡å¤ï¼‰

### 7.2 éƒ¨åˆ†å®ç°æœç´¢æ¥å£ï¼ˆé«˜çº§æœç´¢é¡µé¢ï¼‰

#### 7.2.1 ç›¸ä¼¼ç…§ç‰‡æœç´¢ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/similar/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šæœç´¢ç›¸ä¼¼ç…§ç‰‡

**è·¯å¾„å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | æè¿° |
|--------|------|------|
| photo_id | integer | å‚è€ƒç…§ç‰‡ID |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| threshold | float | 0.8 | ç›¸ä¼¼åº¦é˜ˆå€¼ |
| limit | integer | 10 | ç»“æœæ•°é‡é™åˆ¶ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "reference_photo": {
    "id": 1,
    "filename": "IMG_001.jpg"
  },
  "similar_photos": [
    {
      "id": 5,
      "filename": "IMG_005.jpg",
      "similarity": 0.95,
      "thumbnail_path": "/thumbnails/photo5.jpg"
    }
  ],
  "total_found": 3
}
```

#### 7.2.2 æ™ºèƒ½æ¨èç…§ç‰‡ âŒ å¾…å¼€å‘
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/recommend/{photo_id}`
**åŠŸèƒ½æè¿°**ï¼šåŸºäºå†…å®¹ç›¸ä¼¼åº¦çš„ç…§ç‰‡æ¨è

#### 7.2.3 æœç´¢å†å²ç®¡ç† âŒ å¾…å¼€å‘
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/history`
**åŠŸèƒ½æè¿°**ï¼šè·å–æœç´¢å†å²

**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/search/history`
**åŠŸèƒ½æè¿°**ï¼šä¿å­˜æœç´¢è®°å½•

#### 7.2.4 ä¿å­˜æœç´¢æ¡ä»¶ âŒ å¾…å¼€å‘
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/search/save`
**åŠŸèƒ½æè¿°**ï¼šä¿å­˜æœç´¢æ¡ä»¶

**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/search/saved`
**åŠŸèƒ½æè¿°**ï¼šè·å–ä¿å­˜çš„æœç´¢æ¡ä»¶

### 7.3 æœç´¢ç»“æœå¤„ç†åŠŸèƒ½ï¼ˆåŸºäºç°æœ‰æ¥å£ï¼‰

#### 7.3.1 æ‰¹é‡æ“ä½œåŠŸèƒ½ âœ… åŸºäºç°æœ‰æ¥å£
**åˆ©ç”¨ç°æœ‰æ¥å£**ï¼š
- `POST /api/v1/photos/batch-delete` - æ‰¹é‡åˆ é™¤
- `PUT /api/v1/photos/{photo_id}` - æ›´æ–°ç…§ç‰‡ä¿¡æ¯

#### 7.3.2 ç›¸ä¼¼ç…§ç‰‡å¤„ç†åŠŸèƒ½ âŒ å¾…å¼€å‘
**è®¡åˆ’æ¥å£**ï¼š
- `POST /api/v1/search/similar/process` - å¤„ç†ç›¸ä¼¼ç…§ç‰‡
- åŸºäºç°æœ‰çš„ `DuplicateDetectionService` å®ç°

## å…«ã€å­˜å‚¨ç®¡ç†API âœ… å®Œå…¨å®ç°

### 8.1 å­˜å‚¨ä¿¡æ¯æ¥å£

#### 8.1.1 è·å–å­˜å‚¨ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/storage/info`
**åŠŸèƒ½æè¿°**ï¼šè·å–å­˜å‚¨ä½¿ç”¨æƒ…å†µ

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
    "total_size": 1073741824,
    "used_size": 536870912,
    "free_size": 536870912,
    "originals_size": 402653184,
    "thumbnails_size": 134217728,
    "temp_size": 1048576,
    "backups_size": 67108864,
    "photo_count": 1250,
    "disk_info": {
      "total": 100000000000,
      "free": 30000000000
  }
}
```

#### 8.1.2 è·å–å­˜å‚¨ç›®å½•ç»“æ„ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/storage/structure`
**åŠŸèƒ½æè¿°**ï¼šè·å–å­˜å‚¨ç›®å½•ç»“æ„

#### 8.1.3 è·å–å­˜å‚¨ç»´æŠ¤ä¿¡æ¯ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/storage/maintenance`
**åŠŸèƒ½æè¿°**ï¼šè·å–å­˜å‚¨ç»´æŠ¤ä¿¡æ¯

### 8.2 å¤‡ä»½æ¢å¤æ¥å£

#### 8.2.1 åˆ›å»ºå¤‡ä»½ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/storage/backup`
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºæ•°æ®å¤‡ä»½

**è¯·æ±‚ä½“**ï¼š
```json
{
  "backup_type": "incremental",
  "description": "å®šæœŸå¤‡ä»½"
}
```

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
    "backup_type": "incremental",
    "backup_path": "backups/incremental_backup_20231219_143000.zip",
    "backup_size": 104857600,
    "backup_time": 45.2
}
```

#### 8.2.2 è·å–å¤‡ä»½åˆ—è¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/storage/backups`
**åŠŸèƒ½æè¿°**ï¼šè·å–å¤‡ä»½æ–‡ä»¶åˆ—è¡¨

#### 8.2.3 æ¢å¤å¤‡ä»½ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/storage/restore`
**åŠŸèƒ½æè¿°**ï¼šä»å¤‡ä»½æ¢å¤æ•°æ®

**è¯·æ±‚ä½“**ï¼š
```json
{
  "backup_file": "backups/full_backup_20231219_140000.zip"
}
```

### 8.3 å­˜å‚¨ç»´æŠ¤æ¥å£

#### 8.3.1 æ¸…ç†ä¸´æ—¶æ–‡ä»¶ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/storage/cleanup`
**åŠŸèƒ½æè¿°**ï¼šæ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜

**è¯·æ±‚ä½“**ï¼š
```json
{
  "cleanup_type": "temp",
  "force": false
}
```

#### 8.3.2 æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/storage/integrity/{file_path:path}`
**åŠŸèƒ½æè¿°**ï¼šæ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|--------|------|--------|------|
| expected_hash | string | null | æœŸæœ›çš„å“ˆå¸Œå€¼ |

## ä¹ã€ç³»ç»Ÿç®¡ç†API âœ… å®Œå…¨å®ç°

### 9.1 å¥åº·æ£€æŸ¥æ¥å£

#### 9.1.1 å¥åº·æ£€æŸ¥ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/health`
**åŠŸèƒ½æè¿°**ï¼šç³»ç»Ÿå¥åº·æ£€æŸ¥

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "status": "healthy",
  "timestamp": "2025-01-01T00:00:00Z",
    "version": "1.0.0",
  "uptime": 3600
}
```

## åã€FTSå…¨æ–‡æœç´¢ç®¡ç†API âœ… å®Œå…¨å®ç°

### 10.1 FTSè¡¨ç®¡ç†æ¥å£

#### 10.1.1 æ£€æŸ¥FTSè¡¨çŠ¶æ€ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/fts/status`
**åŠŸèƒ½æè¿°**ï¼šæ£€æŸ¥FTSè¡¨æ˜¯å¦å­˜åœ¨

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "exists": true,
  "message": "FTSè¡¨å·²å­˜åœ¨"
}
```

#### 10.1.2 åˆ›å»ºFTSè¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/fts/create`
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºFTSå…¨æ–‡æœç´¢è¡¨

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "success": true,
  "message": "FTSè¡¨åˆ›å»ºæˆåŠŸ"
}
```

#### 10.1.3 é‡å»ºFTSè¡¨ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/fts/rebuild`
**åŠŸèƒ½æè¿°**ï¼šé‡å»ºFTSè¡¨ï¼ˆåˆ é™¤åé‡æ–°åˆ›å»ºï¼‰

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "success": true,
  "message": "FTSè¡¨é‡å»ºæˆåŠŸ"
}
```

#### 10.1.4 å¡«å……FTSè¡¨æ•°æ® âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/fts/populate`
**åŠŸèƒ½æè¿°**ï¼šå¡«å……FTSè¡¨æ•°æ®ï¼ˆå°†ç°æœ‰ç…§ç‰‡æ•°æ®åŒæ­¥åˆ°FTSè¡¨ï¼‰

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "success": true,
  "message": "FTSè¡¨æ•°æ®å¡«å……å®Œæˆ",
  "rows_affected": 150
}
```

#### 10.1.5 æ›´æ–°AIåˆ†æå†…å®¹ âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`POST /api/v1/fts/update-analysis`
**åŠŸèƒ½æè¿°**ï¼šæ›´æ–°FTSè¡¨ä¸­çš„AIåˆ†æå†…å®¹

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "success": true,
  "message": "AIåˆ†æå†…å®¹æ›´æ–°å®Œæˆ",
  "rows_affected": 45
}
```

#### 10.1.6 FTSæœç´¢æµ‹è¯• âœ… å·²å®ç°
**æ¥å£è·¯å¾„**ï¼š`GET /api/v1/fts/search`
**åŠŸèƒ½æè¿°**ï¼šæµ‹è¯•FTSæœç´¢åŠŸèƒ½

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | æè¿° |
|--------|------|------|------|
| keyword | string | æ˜¯ | æœç´¢å…³é”®è¯ |

**å®é™…å“åº”æ ¼å¼**ï¼š
```json
{
  "keyword": "ç”Ÿæ—¥",
  "results": [1, 2, 3, 5],
  "total_found": 4,
  "search_time_ms": 15
}
```

## åä¸€ã€é”™è¯¯ç å®šä¹‰

### 11.1 FastAPIæ ‡å‡†é”™è¯¯ç 

| HTTPçŠ¶æ€ç  | æè¿° | ä½¿ç”¨åœºæ™¯ |
|-----------|------|----------|
| 200 | æ“ä½œæˆåŠŸ | æ­£å¸¸å“åº” |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| 404 | èµ„æºä¸å­˜åœ¨ | ç…§ç‰‡ã€æ ‡ç­¾ã€åˆ†ç±»ä¸å­˜åœ¨ |
| 422 | æ•°æ®éªŒè¯å¤±è´¥ | è¯·æ±‚ä½“æ ¼å¼é”™è¯¯ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸ |

### 11.2 å®é™…é”™è¯¯å“åº”æ ¼å¼

```json
{
  "detail": "ç…§ç‰‡ä¸å­˜åœ¨"
}
```

## åäºŒã€åç»­é¡µé¢å¼€å‘æŒ‡å¯¼

### 12.1 é«˜çº§æœç´¢é¡µé¢å¼€å‘

#### 12.1.1 å¯ç”¨çš„ç°æœ‰æ¥å£
- `GET /api/v1/search/photos` - ç»¼åˆæœç´¢ï¼ˆå·²å®ç°ï¼‰
- `GET /api/v1/search/suggestions` - æœç´¢å»ºè®®ï¼ˆå·²å®ç°ï¼‰
- `GET /api/v1/search/stats` - æœç´¢ç»Ÿè®¡ï¼ˆå·²å®ç°ï¼‰
- `GET /api/v1/search/similar/{photo_id}` - ç›¸ä¼¼ç…§ç‰‡æœç´¢ï¼ˆå·²å®ç°ï¼‰

#### 12.1.2 éœ€è¦å¼€å‘çš„æ–°æ¥å£
- `GET /api/v1/search/recommend/{photo_id}` - æ™ºèƒ½æ¨è
- `GET /api/v1/search/history` - æœç´¢å†å²
- `POST /api/v1/search/save` - ä¿å­˜æœç´¢æ¡ä»¶

#### 12.1.3 å¼€å‘å»ºè®®
1. **ç›¸ä¼¼ç…§ç‰‡æœç´¢å·²å®ç°**ï¼šå¯ç›´æ¥ä½¿ç”¨ `GET /api/v1/search/similar/{photo_id}` æ¥å£
2. **åˆ©ç”¨ç°æœ‰æ‰¹é‡æ“ä½œæ¥å£**ï¼š`POST /api/v1/photos/batch-delete`ã€`PUT /api/v1/photos/{photo_id}`
3. **å‰ç«¯ç•Œé¢å‚è€ƒ**ï¼š`doc/æœç´¢æ£€ç´¢æ¨¡å—è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` ç¬¬8.2èŠ‚

### 12.2 è®¾ç½®ç®¡ç†é¡µé¢å¼€å‘

#### 12.2.1 å¯ç”¨çš„ç°æœ‰æ¥å£
- `GET /api/v1/storage/info` - å­˜å‚¨ä¿¡æ¯ï¼ˆå·²å®ç°ï¼‰
- `GET /api/v1/health` - ç³»ç»ŸçŠ¶æ€ï¼ˆå·²å®ç°ï¼‰
- `POST /api/v1/storage/cleanup` - æ¸…ç†å­˜å‚¨ï¼ˆå·²å®ç°ï¼‰

#### 12.2.2 éœ€è¦å¼€å‘çš„æ–°æ¥å£
- `GET /api/v1/system/config` - è·å–ç³»ç»Ÿé…ç½®
- `PUT /api/v1/system/config` - æ›´æ–°ç³»ç»Ÿé…ç½®
- `GET /api/v1/system/logs` - è·å–ç³»ç»Ÿæ—¥å¿—

#### 12.2.3 å¼€å‘å»ºè®®
1. **åŸºäºç°æœ‰é…ç½®ç³»ç»Ÿ**ï¼š`app/core/config.py` å·²å®ç°
2. **å‰ç«¯ç•Œé¢å‚è€ƒ**ï¼š`doc/å‰ç«¯ç•Œé¢è®¾è®¡æ–‡æ¡£.md` ç¬¬2.2èŠ‚ï¼ˆæœªå®ç°éƒ¨åˆ†ï¼‰

### 12.3 ç›¸å†Œç®¡ç†é¡µé¢å¼€å‘

#### 12.3.1 å¯ç”¨çš„ç°æœ‰æ¥å£
- `GET /api/v1/categories` - åˆ†ç±»åˆ—è¡¨ï¼ˆå·²å®ç°ï¼‰
- `POST /api/v1/categories` - åˆ›å»ºåˆ†ç±»ï¼ˆå·²å®ç°ï¼‰
- `PUT /api/v1/categories/{category_id}` - æ›´æ–°åˆ†ç±»ï¼ˆå·²å®ç°ï¼‰
- `DELETE /api/v1/categories/{category_id}` - åˆ é™¤åˆ†ç±»ï¼ˆå·²å®ç°ï¼‰
- `GET /api/v1/categories/tree` - åˆ†ç±»æ ‘ï¼ˆå·²å®ç°ï¼‰

#### 12.3.2 éœ€è¦å¼€å‘çš„æ–°æ¥å£
- `POST /api/v1/albums` - åˆ›å»ºç›¸å†Œ
- `GET /api/v1/albums` - ç›¸å†Œåˆ—è¡¨
- `PUT /api/v1/albums/{album_id}` - æ›´æ–°ç›¸å†Œ
- `DELETE /api/v1/albums/{album_id}` - åˆ é™¤ç›¸å†Œ
- `POST /api/v1/albums/{album_id}/photos` - æ·»åŠ ç…§ç‰‡åˆ°ç›¸å†Œ

#### 12.3.3 å¼€å‘å»ºè®®
1. **åŸºäºç°æœ‰åˆ†ç±»ç³»ç»Ÿ**ï¼šç›¸å†Œå¯ä»¥åŸºäºåˆ†ç±»ç³»ç»Ÿæ‰©å±•
2. **æ•°æ®åº“è®¾è®¡**ï¼šéœ€è¦æ–°å¢ç›¸å†Œè¡¨å’Œç›¸å†Œ-ç…§ç‰‡å…³è”è¡¨
3. **å‰ç«¯ç•Œé¢å‚è€ƒ**ï¼š`doc/å‰ç«¯ç•Œé¢è®¾è®¡æ–‡æ¡£.md` ç¬¬2.2èŠ‚ï¼ˆæœªå®ç°éƒ¨åˆ†ï¼‰

## åä¸‰ã€APIè°ƒç”¨ç¤ºä¾‹

### 13.1 JavaScriptè°ƒç”¨ç¤ºä¾‹

#### 13.1.1 è·å–ç…§ç‰‡åˆ—è¡¨ï¼ˆå®é™…å¯ç”¨ï¼‰
```javascript
// è·å–ç…§ç‰‡åˆ—è¡¨
async function getPhotos(skip = 0, limit = 50, search = '') {
  try {
    const params = new URLSearchParams({
      skip: skip.toString(),
      limit: limit.toString()
    });
    if (search) params.append('search', search);
    
    const response = await fetch(`/api/v1/photos?${params}`);
    const result = await response.json();
    
    if (response.ok) {
      console.log('è·å–æˆåŠŸ:', result);
      return result;
    } else {
      console.error('è·å–å¤±è´¥:', result.detail);
      return null;
    }
  } catch (error) {
    console.error('ç½‘ç»œé”™è¯¯:', error);
    return null;
  }
}
```

#### 13.1.2 æœç´¢ç…§ç‰‡ï¼ˆå®é™…å¯ç”¨ï¼‰
```javascript
// æœç´¢ç…§ç‰‡
async function searchPhotos(keyword, searchType = 'all') {
  try {
    const params = new URLSearchParams({
      keyword: keyword,
      search_type: searchType,
      limit: '50'
    });
    
    const response = await fetch(`/api/v1/search/photos?${params}`);
    const result = await response.json();
    
    if (response.ok) {
    return result;
    } else {
      console.error('æœç´¢å¤±è´¥:', result.detail);
      return null;
    }
  } catch (error) {
    console.error('ç½‘ç»œé”™è¯¯:', error);
    return null;
  }
}
```

### 13.2 Pythonè°ƒç”¨ç¤ºä¾‹

#### 13.2.1 ä½¿ç”¨requestsåº“ï¼ˆå®é™…å¯ç”¨ï¼‰
```python
import requests

# è·å–ç…§ç‰‡åˆ—è¡¨
def get_photos(skip=0, limit=50, search=''):
    try:
        params = {
            'skip': skip,
            'limit': limit
        }
        if search:
            params['search'] = search
            
        response = requests.get('/api/v1/photos', params=params)
        response.raise_for_status()
        return response.json()
    except Exception as e:
        print(f"è·å–å¤±è´¥: {e}")
        return None

# æœç´¢ç…§ç‰‡
def search_photos(keyword, search_type='all'):
    try:
        params = {
            'keyword': keyword,
            'search_type': search_type,
            'limit': 50
        }
        
        response = requests.get('/api/v1/search/photos', params=params)
        response.raise_for_status()
            return response.json()
    except Exception as e:
        print(f"æœç´¢å¤±è´¥: {e}")
        return None
```

## åå››ã€æ€»ç»“

æœ¬APIæ¥å£è¯¦ç»†æ–‡æ¡£åŸºäºå®é™…ä»£ç å®ç°ï¼Œä¸ºå®¶åº­å•æœºç‰ˆæ™ºèƒ½ç…§ç‰‡æ•´ç†ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„APIè§„èŒƒï¼š

### **âœ… å·²å®Œå…¨å®ç°çš„åŠŸèƒ½**

**ç…§ç‰‡ç®¡ç†API**ï¼š
- ç…§ç‰‡CRUDæ“ä½œã€æ™ºèƒ½å¤„ç†ã€ç»Ÿè®¡ä¿¡æ¯
- æ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰ã€æ’åº
- å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå‚æ•°éªŒè¯

**æœç´¢æ£€ç´¢API**ï¼š
- ç»¼åˆæœç´¢ã€æœç´¢å»ºè®®ã€æœç´¢ç»Ÿè®¡
- æ”¯æŒå¤šç»´åº¦æœç´¢æ¡ä»¶ç»„åˆ
- ä¸ºé«˜çº§æœç´¢é¡µé¢æä¾›åŸºç¡€

**æ ‡ç­¾åˆ†ç±»API**ï¼š
- å®Œæ•´çš„æ ‡ç­¾å’Œåˆ†ç±»CRUDæ“ä½œ
- æ”¯æŒåˆ†ç±»æ ‘ç»“æ„ã€çƒ­é—¨æ ‡ç­¾/åˆ†ç±»
- ä¸ºç›¸å†Œç®¡ç†é¡µé¢æä¾›åŸºç¡€

**æ™ºèƒ½åˆ†æAPI**ï¼š
- AIå†…å®¹åˆ†æã€è´¨é‡è¯„ä¼°ã€é‡å¤æ£€æµ‹
- æ”¯æŒæ‰¹é‡åˆ†æå’Œå¼‚æ­¥å¤„ç†
- å®Œæ•´çš„åˆ†æç»“æœç®¡ç†

**å­˜å‚¨ç®¡ç†API**ï¼š
- å­˜å‚¨ç›‘æ§ã€å¤‡ä»½æ¢å¤ã€ç»´æŠ¤åŠŸèƒ½
- æ”¯æŒå¢é‡å¤‡ä»½å’Œæ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥
- ä¸ºè®¾ç½®ç®¡ç†é¡µé¢æä¾›åŸºç¡€

**FTSç®¡ç†API**ï¼š
- FTSè¡¨åˆ›å»ºã€é‡å»ºã€æ•°æ®å¡«å……
- AIåˆ†æå†…å®¹åŒæ­¥å’Œæ›´æ–°
- FTSæœç´¢åŠŸèƒ½æµ‹è¯•å’ŒéªŒè¯
- ä¸ºå…¨æ–‡æœç´¢åŠŸèƒ½æä¾›ç®¡ç†æ”¯æŒ

### **ğŸš€ å¾…å¼€å‘çš„åŠŸèƒ½**

**é«˜çº§æœç´¢é¡µé¢**ï¼š
- ç›¸ä¼¼ç…§ç‰‡æœç´¢ï¼ˆå·²å®ç°ï¼‰ã€æ™ºèƒ½æ¨è
- æœç´¢å†å²ç®¡ç†ã€ä¿å­˜æœç´¢æ¡ä»¶
- æœç´¢ç»“æœå¤„ç†åŠŸèƒ½

**è®¾ç½®ç®¡ç†é¡µé¢**ï¼š
- ç³»ç»Ÿé…ç½®ç®¡ç†
- æ—¥å¿—æŸ¥çœ‹å’Œç®¡ç†
- æ€§èƒ½ç›‘æ§

**ç›¸å†Œç®¡ç†é¡µé¢**ï¼š
- ç›¸å†ŒCRUDæ“ä½œ
- ç›¸å†Œ-ç…§ç‰‡å…³è”ç®¡ç†
- ç›¸å†Œåˆ†äº«åŠŸèƒ½

### **ğŸ“ˆ å¼€å‘å»ºè®®**

**ä¼˜å…ˆçº§1ï¼ˆçŸ­æœŸï¼‰**ï¼š
1. ç›¸ä¼¼ç…§ç‰‡æœç´¢åŠŸèƒ½å·²å®ç°ï¼Œå¯ç›´æ¥ä½¿ç”¨
2. å¼€å‘æœç´¢ç»“æœå¤„ç†åŠŸèƒ½ï¼ˆåˆ©ç”¨ç°æœ‰æ‰¹é‡æ“ä½œæ¥å£ï¼‰
3. å®Œå–„é«˜çº§æœç´¢ç•Œé¢

**ä¼˜å…ˆçº§2ï¼ˆä¸­æœŸï¼‰**ï¼š
1. å®ç°è®¾ç½®ç®¡ç†é¡µé¢ï¼ˆåŸºäºç°æœ‰é…ç½®ç³»ç»Ÿï¼‰
2. å¼€å‘ç›¸å†Œç®¡ç†åŠŸèƒ½ï¼ˆåŸºäºç°æœ‰åˆ†ç±»ç³»ç»Ÿï¼‰
3. æ·»åŠ æœç´¢å†å²ç®¡ç†åŠŸèƒ½

**ä¼˜å…ˆçº§3ï¼ˆé•¿æœŸï¼‰**ï¼š
1. å®ç°æ™ºèƒ½æ¨èåŠŸèƒ½
2. æ·»åŠ ç›¸å†Œåˆ†äº«åŠŸèƒ½
3. å®Œå–„ç³»ç»Ÿç›‘æ§å’Œæ—¥å¿—ç®¡ç†

é€šè¿‡éµå¾ªæœ¬APIæ–‡æ¡£ï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥åŸºäºç°æœ‰å®ç°å¿«é€Ÿå¼€å‘åç»­ä¸‰ä¸ªé¡µé¢ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å®Œæ•´ã€æ›´å¼ºå¤§çš„ç…§ç‰‡ç®¡ç†æœåŠ¡ã€‚
