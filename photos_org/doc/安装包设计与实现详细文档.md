# å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ - å®‰è£…åŒ…è®¾è®¡ä¸å®ç°è¯¦ç»†æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›®åç§° | å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ |
|---------|-------------------|
| æ–‡æ¡£åç§° | å®‰è£…åŒ…è®¾è®¡ä¸å®ç°è¯¦ç»†æ–‡æ¡£ |
| ç‰ˆæœ¬å· | 1.0.0 |
| ä½œè€… | AIåŠ©æ‰‹ |
| åˆ›å»ºæ—¥æœŸ | 2025å¹´9æœˆ17æ—¥ |
| æœ€åæ›´æ–° | 2025å¹´9æœˆ17æ—¥ |

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [è®¾è®¡ç›®æ ‡](#è®¾è®¡ç›®æ ‡)
3. [æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©](#æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©)
4. [æ€»ä½“æ¶æ„è®¾è®¡](#æ€»ä½“æ¶æ„è®¾è®¡)
5. [è¯¦ç»†å®ç°æ–¹æ¡ˆ](#è¯¦ç»†å®ç°æ–¹æ¡ˆ)
6. [æ–‡ä»¶ç»“æ„è¯´æ˜](#æ–‡ä»¶ç»“æ„è¯´æ˜)
7. [å®‰è£…æµç¨‹è®¾è®¡](#å®‰è£…æµç¨‹è®¾è®¡)
8. [æŠ€æœ¯å®ç°ç»†èŠ‚](#æŠ€æœ¯å®ç°ç»†èŠ‚)
9. [æµ‹è¯•å’ŒéªŒè¯](#æµ‹è¯•å’ŒéªŒè¯)
10. [éƒ¨ç½²å’Œç»´æŠ¤](#éƒ¨ç½²å’Œç»´æŠ¤)
11. [é£é™©è¯„ä¼°ä¸åº”å¯¹](#é£é™©è¯„ä¼°ä¸åº”å¯¹)
12. [æ€»ç»“ä¸å±•æœ›](#æ€»ç»“ä¸å±•æœ›)

---

## æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯

å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºAIæŠ€æœ¯çš„æ™ºèƒ½ç…§ç‰‡ç®¡ç†å¹³å°ï¼Œä¸ºäº†è®©æœ€ç»ˆç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°å®‰è£…å’Œä½¿ç”¨è¯¥ç³»ç»Ÿï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„å®‰è£…åŒ…è§£å†³æ–¹æ¡ˆã€‚

### è®¾è®¡ç›®æ ‡

- **ç”¨æˆ·å‹å¥½**ï¼šä¸€é”®å®‰è£…ï¼Œæ— éœ€å¤æ‚é…ç½®
- **è·¨å¹³å°å…¼å®¹**ï¼šæ”¯æŒWindowsã€Linuxã€macOS
- **è‡ªåŠ¨é…ç½®**ï¼šæ™ºèƒ½æ£€æµ‹ç¯å¢ƒå¹¶è‡ªåŠ¨é…ç½®
- **å®Œæ•´åŠŸèƒ½**ï¼šåŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶å’Œä¾èµ–
- **å®‰å…¨å¯é **ï¼šç¡®ä¿ç³»ç»Ÿå®‰å…¨å’Œæ•°æ®å®Œæ•´æ€§

### ä¸»è¦ç‰¹æ€§

- âœ… å•æ–‡ä»¶åˆ†å‘ï¼ˆå¯é€‰ï¼‰
- âœ… äº¤äº’å¼å®‰è£…ç•Œé¢
- âœ… è‡ªåŠ¨è·¯å¾„é€‰æ‹©å’Œé…ç½®
- âœ… æ¡Œé¢å¿«æ·æ–¹å¼åˆ›å»º
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå›æ»šæœºåˆ¶
- âœ… è¯¦ç»†çš„å®‰è£…æ—¥å¿—å’ŒçŠ¶æ€åé¦ˆ

---

## è®¾è®¡ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡

1. **ç®€åŒ–ç”¨æˆ·ä½“éªŒ**
   - ç”¨æˆ·åªéœ€ä¸‹è½½ã€è§£å‹ã€è¿è¡Œå³å¯å®Œæˆå®‰è£…
   - æ— éœ€æ‰‹åŠ¨é…ç½®å¤æ‚çš„ç¯å¢ƒå˜é‡å’Œä¾èµ–å…³ç³»
   - æä¾›å‹å¥½çš„å›¾å½¢åŒ–å®‰è£…ç•Œé¢

2. **ä¿è¯ç³»ç»Ÿå®Œæ•´æ€§**
   - ç¡®ä¿æ‰€æœ‰å¿…è¦æ–‡ä»¶éƒ½è¢«æ­£ç¡®åŒ…å«
   - è‡ªåŠ¨æ£€æµ‹å’Œå®‰è£…ç¼ºå¤±çš„ä¾èµ–
   - éªŒè¯å®‰è£…ç»“æœçš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§

3. **è·¨å¹³å°å…¼å®¹æ€§**
   - æ”¯æŒä¸»æµæ“ä½œç³»ç»Ÿï¼ˆWindowsã€Linuxã€macOSï¼‰
   - è‡ªåŠ¨é€‚é…ä¸åŒå¹³å°çš„è·¯å¾„æ ¼å¼å’Œç³»ç»Ÿç‰¹æ€§
   - ç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒ

4. **çµæ´»çš„é…ç½®é€‰é¡¹**
   - å…è®¸ç”¨æˆ·è‡ªå®šä¹‰å®‰è£…è·¯å¾„
   - æ”¯æŒè‡ªå®šä¹‰å­˜å‚¨å’Œæ•°æ®åº“è·¯å¾„
   - æä¾›é«˜çº§é…ç½®é€‰é¡¹

### è´¨é‡ç›®æ ‡

- **å®‰è£…æˆåŠŸç‡**ï¼š> 95%
- **ç”¨æˆ·æ»¡æ„åº¦**ï¼š> 90%
- **å…¼å®¹æ€§è¦†ç›–**ï¼šæ”¯æŒ 90% çš„ä¸»æµé…ç½®
- **æ€§èƒ½å½±å“**ï¼šå¯åŠ¨æ—¶é—´ < 30ç§’

---

## æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©

### æ‰“åŒ…å·¥å…·é€‰æ‹©

#### å¤‡é€‰æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|-----|------|------|---------|
| **PyInstaller** â­ | è·¨å¹³å°ã€å•æ–‡ä»¶ã€è‡ªåŠ¨ä¾èµ–æ£€æµ‹ | åŒ…ä½“ç§¯è¾ƒå¤§ã€é¦–æ¬¡è¿è¡Œæ…¢ | æ¨èä½¿ç”¨ |
| cx_Freeze | è½»é‡çº§ã€å¯åŠ¨å¿« | ä¾èµ–ç®¡ç†å¤æ‚ | å¤‡ç”¨æ–¹æ¡ˆ |
| py2exe | Windowsä¸“ç”¨ã€è½»é‡ | ä¸æ”¯æŒè·¨å¹³å° | Windowsä¸“ç”¨ |
| auto-py-to-exe | å›¾å½¢ç•Œé¢ã€ç®€å• | åŠŸèƒ½æœ‰é™ | å¿«é€ŸåŸå‹ |

#### æœ€ç»ˆé€‰æ‹©ï¼šPyInstaller

**é€‰æ‹©ç†ç”±**ï¼š
1. **è·¨å¹³å°æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒWindowsã€Linuxã€macOS
2. **è‡ªåŠ¨ä¾èµ–æ£€æµ‹**ï¼šæ™ºèƒ½åˆ†æimportè¯­å¥ï¼Œè‡ªåŠ¨åŒ…å«ä¾èµ–
3. **ä¸°å¯Œçš„é…ç½®é€‰é¡¹**ï¼šæ”¯æŒå•æ–‡ä»¶ã€å¤šæ–‡ä»¶ã€è‡ªå®šä¹‰æ’é™¤ç­‰
4. **æ´»è·ƒçš„ç¤¾åŒº**ï¼šæœ‰å®Œå–„çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ
5. **ä¼ä¸šçº§åº”ç”¨**ï¼šè¢«ä¼—å¤šå•†ä¸šè½¯ä»¶é‡‡ç”¨

### å®‰è£…ç¨‹åºè®¾è®¡

#### æ ¸å¿ƒç»„ä»¶

1. **PyInstaller**ï¼šPythonåº”ç”¨æ‰“åŒ…
2. **è‡ªå®šä¹‰å®‰è£…è„šæœ¬**ï¼šPythonç¼–å†™çš„äº¤äº’å¼å®‰è£…ç¨‹åº
3. **æ‰¹å¤„ç†è„šæœ¬**ï¼šå¹³å°ç‰¹å®šçš„å¯åŠ¨è„šæœ¬
4. **é…ç½®æ–‡ä»¶**ï¼šJSONæ ¼å¼çš„é…ç½®ç®¡ç†

#### æŠ€æœ¯ç‰¹ç‚¹

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ç»„ä»¶ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„å®‰è£…è¿‡ç¨‹è®°å½•
- **å›æ»šæœºåˆ¶**ï¼šå®‰è£…å¤±è´¥æ—¶è‡ªåŠ¨æ¸…ç†

---

## æ€»ä½“æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ä¸‹è½½      â”‚    â”‚   å®‰è£…ç¨‹åº      â”‚    â”‚   ç³»ç»Ÿéƒ¨ç½²      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ä¸‹è½½å‹ç¼©åŒ…   â”‚â”€â”€â”€â–¶â”‚ â€¢ ç¯å¢ƒæ£€æµ‹      â”‚â”€â”€â”€â–¶â”‚ â€¢ æ–‡ä»¶å¤åˆ¶      â”‚
â”‚ â€¢ è§£å‹æ–‡ä»¶     â”‚    â”‚ â€¢ è·¯å¾„é€‰æ‹©      â”‚    â”‚ â€¢ é…ç½®ä¿®æ”¹      â”‚
â”‚ â€¢ è¿è¡Œå®‰è£…     â”‚    â”‚ â€¢ ä¾èµ–æ£€æŸ¥      â”‚    â”‚ â€¢ å¿«æ·æ–¹å¼åˆ›å»º  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥ä½œæµç¨‹å›¾

```mermaid
graph TD
    A[ç”¨æˆ·ä¸‹è½½å®‰è£…åŒ…] --> B[è§£å‹å®‰è£…åŒ…]
    B --> C[è¿è¡Œå®‰è£…è„šæœ¬]
    C --> D[ç¯å¢ƒæ£€æµ‹]
    D --> E[è·¯å¾„é€‰æ‹©]
    E --> F[æ–‡ä»¶å¤åˆ¶]
    F --> G[é…ç½®ä¿®æ”¹]
    G --> H[å¿«æ·æ–¹å¼åˆ›å»º]
    H --> I[å®‰è£…å®Œæˆ]
```

### ç»„ä»¶å…³ç³»å›¾

```
å®‰è£…åŒ… (ZIP/TAR)
â”œâ”€â”€ ğŸ“„ installer.py          # ä¸»å®‰è£…è„šæœ¬
â”œâ”€â”€ ğŸ“„ install.bat/sh        # å¹³å°å¯åŠ¨è„šæœ¬
â”œâ”€â”€ ğŸ“„ config.json           # ç”¨æˆ·é…ç½®
â”œâ”€â”€ ğŸ“„ config_default.json   # é»˜è®¤é…ç½®
â”œâ”€â”€ ğŸ“ dist/                 # PyInstallerè¾“å‡º
â”‚   â””â”€â”€ ğŸ“„ PhotoSystem.exe   # å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ ğŸ“ app/                  # åº”ç”¨æ¨¡å—
â”œâ”€â”€ ğŸ“ static/               # å‰ç«¯èµ„æº
â”œâ”€â”€ ğŸ“ templates/            # HTMLæ¨¡æ¿
â””â”€â”€ ğŸ“ doc/                  # æ–‡æ¡£
```

---

## è¯¦ç»†å®ç°æ–¹æ¡ˆ

### 1. PyInstalleræ‰“åŒ…é…ç½®

#### æ ¸å¿ƒé…ç½®æ–‡ä»¶ (main.spec)

```python
# -*- mode: python ; coding: utf-8 -*-
"""
PyInstaller æ‰“åŒ…é…ç½®æ–‡ä»¶
"""

import os
import sys
from pathlib import Path

# é¡¹ç›®æ ¹ç›®å½•
ROOT_DIR = Path(__file__).parent

# åˆ†æä¸»ç¨‹åº
a = Analysis(
    ['main.py'],  # ä¸»ç¨‹åºæ–‡ä»¶
    pathex=[str(ROOT_DIR)],  # Pythonè·¯å¾„
    binaries=[],  # äºŒè¿›åˆ¶æ–‡ä»¶
    datas=[
        # æ ¸å¿ƒåº”ç”¨æ–‡ä»¶
        (str(ROOT_DIR / 'app'), 'app'),
        # å‰ç«¯èµ„æº
        (str(ROOT_DIR / 'static'), 'static'),
        (str(ROOT_DIR / 'templates'), 'templates'),
        # å·¥å…·æ–‡ä»¶
        (str(ROOT_DIR / 'utilities'), 'utilities'),
        # é…ç½®æ–‡ä»¶
        (str(ROOT_DIR / 'config.json'), '.'),
        (str(ROOT_DIR / 'requirements.txt'), '.'),
        (str(ROOT_DIR / 'config_default.json'), '.'),
        (str(ROOT_DIR / 'README.md'), '.'),
    ],
    hiddenimports=[
        # FastAPIç›¸å…³æ¨¡å—
        'fastapi', 'uvicorn', 'sqlalchemy',
        # å…¶ä»–ä¾èµ–æ¨¡å—
        'PIL', 'numpy', 'pandas', 'requests'
    ],
    excludes=[
        # æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
        '__pycache__', '*.pyc', '*.pyo',
        'tkinter', 'matplotlib', 'pytest'
    ]
)

# åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶
pyz = PYZ(a.pure, a.zipped_data, cipher=None)
exe = EXE(pyz, a.scripts, [],
          exclude_binaries=True,
          name='PhotoSystem',
          debug=False,
          bootloader_ignore_signals=False,
          strip=False,
          upx=True,
          console=True,
          disable_windowed_traceback=False,
          argv_emulation=False,
          target_arch=None,
          codesign_identity=None,
          entitlements_file=None,
          icon=None)

# åˆ›å»ºåˆ†å‘ç›®å½•
coll = COLLECT(exe, a.binaries, a.zipfiles, a.datas,
               strip=False, upx=True, upx_exclude=[],
               name='PhotoSystem')
```

#### æ‰“åŒ…å‘½ä»¤

```bash
# Windows
pyinstaller --clean main.spec

# Linux/macOS
pyinstaller --clean main.spec
```

### 2. äº¤äº’å¼å®‰è£…è„šæœ¬

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

```python
class PhotoSystemInstaller:
    def __init__(self):
        self.system = platform.system().lower()
        self.install_path = None
        self.storage_path = None

    def print_banner(self):
        """æ˜¾ç¤ºå®‰è£…ç¨‹åºæ¨ªå¹…"""

    def select_install_path(self):
        """é€‰æ‹©å®‰è£…è·¯å¾„"""

    def select_storage_path(self):
        """é€‰æ‹©å­˜å‚¨è·¯å¾„"""

    def copy_files(self):
        """å¤åˆ¶ç¨‹åºæ–‡ä»¶"""

    def update_config(self):
        """æ›´æ–°é…ç½®æ–‡ä»¶"""

    def create_shortcut(self):
        """åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼"""

    def print_summary(self):
        """æ˜¾ç¤ºå®‰è£…æ€»ç»“"""
```

#### è·¨å¹³å°é€‚é…

- **Windows**: ä½¿ç”¨winshellåˆ›å»º.lnkå¿«æ·æ–¹å¼
- **Linux**: åˆ›å»º.desktopæ–‡ä»¶åˆ°~/.local/share/applications/
- **macOS**: åˆ›å»º.appåŒ…æˆ–è„šæœ¬åˆ°æ¡Œé¢

### 3. å¹³å°ç‰¹å®šè„šæœ¬

#### Windows (install.bat)
```batch
@echo off
chcp 65001 >nul
title å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ - å®‰è£…ç¨‹åº

echo æ­£åœ¨å¯åŠ¨å®‰è£…ç¨‹åº...
python installer.py
```

#### Linux/macOS (install.sh)
```bash
#!/bin/bash
echo "æ­£åœ¨å¯åŠ¨å®‰è£…ç¨‹åº..."
python3 installer.py
```

### 4. è‡ªåŠ¨æ‰“åŒ…è„šæœ¬

#### Windows (build_installer.bat)
```batch
@echo off
echo æ­£åœ¨æ£€æŸ¥ç¯å¢ƒ...
python --version

echo æ­£åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶...
pyinstaller --clean main.spec

echo æ­£åœ¨å‡†å¤‡åˆ†å‘åŒ…...
# å¤åˆ¶æ–‡ä»¶åˆ°åˆ†å‘ç›®å½•
# ç”Ÿæˆå‹ç¼©åŒ…
```

#### Linux/macOS (build_installer.sh)
```bash
#!/bin/bash
echo "æ­£åœ¨æ£€æŸ¥ç¯å¢ƒ..."
python3 --version

echo "æ­£åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶..."
pyinstaller --clean main.spec

echo "æ­£åœ¨å‡†å¤‡åˆ†å‘åŒ…..."
# å¤åˆ¶æ–‡ä»¶åˆ°åˆ†å‘ç›®å½•
# ç”Ÿæˆå‹ç¼©åŒ…
```

---

## æ–‡ä»¶ç»“æ„è¯´æ˜

### æºä»£ç ç›®å½•ç»“æ„

```
PhotoSystem/
â”œâ”€â”€ ğŸ“„ main.py                 # ä¸»ç¨‹åº
â”œâ”€â”€ ğŸ“„ main.spec              # PyInstalleré…ç½®
â”œâ”€â”€ ğŸ“„ installer.py           # å®‰è£…è„šæœ¬
â”œâ”€â”€ ğŸ“„ install.bat            # Windowså®‰è£…å¯åŠ¨
â”œâ”€â”€ ğŸ“„ install.sh             # Linux/macOSå®‰è£…å¯åŠ¨
â”œâ”€â”€ ğŸ“„ build_installer.bat    # Windowsæ‰“åŒ…è„šæœ¬
â”œâ”€â”€ ğŸ“„ build_installer.sh     # Linux/macOSæ‰“åŒ…è„šæœ¬
â”œâ”€â”€ ğŸ“„ config.json            # ç”¨æˆ·é…ç½®
â”œâ”€â”€ ğŸ“„ config_default.json    # é»˜è®¤é…ç½®
â”œâ”€â”€ ğŸ“„ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ ğŸ“„ README.md              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ ğŸ“„ INSTALL_README.md      # å®‰è£…æŒ‡å—
â”œâ”€â”€ ğŸ“„ PACKAGING_README.md    # æ‰“åŒ…æŒ‡å—
â”œâ”€â”€ ğŸ“ app/                   # åº”ç”¨æ¨¡å—
â”œâ”€â”€ ğŸ“ static/                # å‰ç«¯èµ„æº
â”œâ”€â”€ ğŸ“ templates/             # HTMLæ¨¡æ¿
â”œâ”€â”€ ğŸ“ utilities/             # å·¥å…·è„šæœ¬
â”œâ”€â”€ ğŸ“ doc/                   # æ–‡æ¡£
â””â”€â”€ ğŸ“ dist/                  # PyInstallerè¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

### å®‰è£…åŒ…ç›®å½•ç»“æ„

```
PhotoSystem-Installer/
â”œâ”€â”€ ğŸ“„ PhotoSystem.exe        # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆWindowsï¼‰
â”œâ”€â”€ ğŸ“„ PhotoSystem            # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆLinux/macOSï¼‰
â”œâ”€â”€ ğŸ“„ config.json            # ç”¨æˆ·é…ç½®
â”œâ”€â”€ ğŸ“„ config_default.json    # é»˜è®¤é…ç½®
â”œâ”€â”€ ğŸ“„ installer.py           # å®‰è£…è„šæœ¬
â”œâ”€â”€ ğŸ“„ install.bat/sh         # å¹³å°å¯åŠ¨è„šæœ¬
â”œâ”€â”€ ğŸ“„ README.md              # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ INSTALL_README.md      # å®‰è£…æŒ‡å—
â”œâ”€â”€ ğŸ“ app/                   # åº”ç”¨æ¨¡å—
â”œâ”€â”€ ğŸ“ static/                # å‰ç«¯èµ„æº
â”œâ”€â”€ ğŸ“ templates/             # HTMLæ¨¡æ¿
â””â”€â”€ ğŸ“ doc/                   # æ–‡æ¡£
```

### å®‰è£…åç›®å½•ç»“æ„

```
å®‰è£…ç›®å½•/
â”œâ”€â”€ ğŸ“„ PhotoSystem.exe        # ä¸»ç¨‹åº
â”œâ”€â”€ ğŸ“„ config.json            # ç”¨æˆ·é…ç½®
â”œâ”€â”€ ğŸ“„ config_default.json    # é»˜è®¤é…ç½®
â”œâ”€â”€ ğŸ“ app/                   # åº”ç”¨æ¨¡å—
â”œâ”€â”€ ğŸ“ static/                # å‰ç«¯èµ„æº
â”œâ”€â”€ ğŸ“ templates/             # HTMLæ¨¡æ¿
â””â”€â”€ ğŸ“ doc/                   # æ–‡æ¡£

æ•°æ®ç›®å½•/ (ç”¨æˆ·é€‰æ‹©)
â”œâ”€â”€ ğŸ“ originals/             # åŸå§‹ç…§ç‰‡
â”œâ”€â”€ ğŸ“ thumbnails/           # ç¼©ç•¥å›¾
â”œâ”€â”€ ğŸ“ temp/                 # ä¸´æ—¶æ–‡ä»¶
â””â”€â”€ ğŸ“ backups/              # å¤‡ä»½æ–‡ä»¶

æ•°æ®åº“ç›®å½•/
â””â”€â”€ ğŸ“„ photos.db             # SQLiteæ•°æ®åº“

æ—¥å¿—ç›®å½•/
â””â”€â”€ ğŸ“„ app.log               # åº”ç”¨æ—¥å¿—
```

---

## å®‰è£…æµç¨‹è®¾è®¡

### æ€»ä½“æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant I as å®‰è£…ç¨‹åº
    participant S as ç³»ç»Ÿ

    U->>I: è¿è¡Œå®‰è£…è„šæœ¬
    I->>S: æ£€æµ‹ç³»ç»Ÿç¯å¢ƒ
    S-->>I: è¿”å›ç¯å¢ƒä¿¡æ¯
    I->>U: æ˜¾ç¤ºç¯å¢ƒæ£€æµ‹ç»“æœ

    I->>U: æç¤ºé€‰æ‹©å®‰è£…è·¯å¾„
    U->>I: é€‰æ‹©å®‰è£…è·¯å¾„
    I->>U: æç¤ºé€‰æ‹©å­˜å‚¨è·¯å¾„
    U->>I: é€‰æ‹©å­˜å‚¨è·¯å¾„

    I->>S: åˆ›å»ºç›®å½•ç»“æ„
    I->>S: å¤åˆ¶ç¨‹åºæ–‡ä»¶
    I->>I: ä¿®æ”¹é…ç½®æ–‡ä»¶
    I->>S: åˆ›å»ºå¿«æ·æ–¹å¼

    I->>U: æ˜¾ç¤ºå®‰è£…å®Œæˆä¿¡æ¯
```

### è¯¦ç»†æ­¥éª¤

#### æ­¥éª¤1ï¼šç¯å¢ƒæ£€æµ‹
- æ£€æµ‹æ“ä½œç³»ç»Ÿç±»å‹å’Œç‰ˆæœ¬
- æ£€æŸ¥Pythonç‰ˆæœ¬å’Œå…³é”®æ¨¡å—
- éªŒè¯ç£ç›˜ç©ºé—´å’Œæƒé™
- æ˜¾ç¤ºç³»ç»Ÿå…¼å®¹æ€§æŠ¥å‘Š

#### æ­¥éª¤2ï¼šè·¯å¾„é€‰æ‹©
- **å®‰è£…è·¯å¾„é€‰æ‹©**
  - é»˜è®¤è·¯å¾„ï¼š`C:\Program Files\PhotoSystem` (Windows)
  - é»˜è®¤è·¯å¾„ï¼š`/opt/photosystem` (Linux)
  - é»˜è®¤è·¯å¾„ï¼š`/Applications/PhotoSystem` (macOS)

- **å­˜å‚¨è·¯å¾„é€‰æ‹©**
  - é»˜è®¤è·¯å¾„ï¼š`~/Documents/PhotoSystem`
  - æ”¯æŒè‡ªå®šä¹‰è·¯å¾„é€‰æ‹©
  - è‡ªåŠ¨éªŒè¯è·¯å¾„æƒé™

#### æ­¥éª¤3ï¼šæ–‡ä»¶å®‰è£…
- åˆ›å»ºæ‰€æœ‰å¿…è¦çš„ç›®å½•
- å¤åˆ¶ç¨‹åºæ–‡ä»¶å’Œèµ„æº
- è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
- éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

#### æ­¥éª¤4ï¼šé…ç½®è®¾ç½®
- æ›´æ–°config.jsonä¸­çš„è·¯å¾„é…ç½®
- è®¾ç½®ç³»ç»Ÿç‰¹å®šçš„é…ç½®é¡¹
- åˆ›å»ºåˆå§‹é…ç½®æ–‡ä»¶
- éªŒè¯é…ç½®æ–‡ä»¶çš„æœ‰æ•ˆæ€§

#### æ­¥éª¤5ï¼šå¿«æ·æ–¹å¼åˆ›å»º
- Windowsï¼šåˆ›å»ºæ¡Œé¢.lnkæ–‡ä»¶
- Linuxï¼šåˆ›å»º.desktopæ–‡ä»¶
- macOSï¼šåˆ›å»º.appåŒ…æˆ–è„šæœ¬
- è®¾ç½®æ­£ç¡®çš„å›¾æ ‡å’Œæè¿°

#### æ­¥éª¤6ï¼šå®‰è£…éªŒè¯
- æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…
- éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆ
- æµ‹è¯•å¿«æ·æ–¹å¼æ˜¯å¦æ­£å¸¸å·¥ä½œ
- ç”Ÿæˆå®‰è£…æŠ¥å‘Š

### é”™è¯¯å¤„ç†æµç¨‹

#### å®‰è£…å¤±è´¥æ—¶çš„å¤„ç†
1. **æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯**ï¼šæ¸…æ¥šè¯´æ˜å¤±è´¥åŸå› 
2. **æä¾›è§£å†³å»ºè®®**ï¼šç»™å‡ºå…·ä½“çš„è§£å†³æ­¥éª¤
3. **è‡ªåŠ¨å›æ»š**ï¼šæ¸…ç†å·²å®‰è£…çš„æ–‡ä»¶
4. **ç”Ÿæˆé”™è¯¯æ—¥å¿—**ï¼šä¿å­˜è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

#### å¸¸è§é”™è¯¯åŠå¤„ç†

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹æ¡ˆ |
|---------|---------|
| æƒé™ä¸è¶³ | æç¤ºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ |
| ç£ç›˜ç©ºé—´ä¸è¶³ | æ˜¾ç¤ºæ‰€éœ€ç©ºé—´å’Œå¯ç”¨ç©ºé—´ |
| æ–‡ä»¶è¢«å ç”¨ | æç¤ºå…³é—­ç›¸å…³ç¨‹åº |
| ç½‘ç»œè¿æ¥å¤±è´¥ | æä¾›ç¦»çº¿å®‰è£…é€‰é¡¹ |

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. PyInstalleré…ç½®ä¼˜åŒ–

#### ä¾èµ–åˆ†æç­–ç•¥

```python
# è‡ªåŠ¨æ£€æµ‹ä¾èµ–
hiddenimports = [
    # æ ¸å¿ƒæ¡†æ¶
    'fastapi', 'uvicorn', 'starlette',
    # æ•°æ®å¤„ç†
    'sqlalchemy', 'numpy', 'pandas',
    # å›¾åƒå¤„ç†
    'PIL', 'PIL.Image', 'PIL.ImageOps',
    # ç½‘ç»œè¯·æ±‚
    'httpx', 'requests',
    # å…¶ä»–å·¥å…·
    'click', 'colorama', 'tqdm'
]
```

#### èµ„æºæ–‡ä»¶å¤„ç†

```python
# é™æ€èµ„æºåŒ…å«
datas = [
    ('static', 'static'),      # å‰ç«¯èµ„æº
    ('templates', 'templates'), # HTMLæ¨¡æ¿
    ('config.json', '.'),      # é…ç½®æ–‡ä»¶
]
```

#### æ€§èƒ½ä¼˜åŒ–é…ç½®

```python
# å‹ç¼©å’Œä¼˜åŒ–
exe = EXE(
    pyz,
    upx=True,                  # ä½¿ç”¨UPXå‹ç¼©
    strip=False,              # ä¸å‰¥ç¦»è°ƒè¯•ä¿¡æ¯
    console=True,             # æ˜¾ç¤ºæ§åˆ¶å°
    disable_windowed_traceback=False
)
```

### 2. è·¨å¹³å°å…¼å®¹æ€§

#### è·¯å¾„å¤„ç†

```python
from pathlib import Path

# è·¨å¹³å°è·¯å¾„å¤„ç†
def get_default_install_path():
    system = platform.system().lower()
    if system == "windows":
        return Path("C:/Program Files/PhotoSystem")
    elif system == "linux":
        return Path("/opt/photosystem")
    elif system == "darwin":  # macOS
        return Path("/Applications/PhotoSystem")
    else:
        return Path.home() / "PhotoSystem"
```

#### æ–‡ä»¶æƒé™è®¾ç½®

```python
def set_file_permissions(path):
    """è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™"""
    if platform.system().lower() != "windows":
        # Linux/macOS
        os.chmod(path, 0o755)  # å¯æ‰§è¡Œæƒé™
```

#### å¿«æ·æ–¹å¼åˆ›å»º

```python
def create_shortcut_windows(target, shortcut_path):
    """Windowså¿«æ·æ–¹å¼åˆ›å»º"""
    import winshell
    winshell.CreateShortcut(
        Path=shortcut_path,
        Target=target,
        Icon=(target, 0),
        Description="å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ"
    )

def create_shortcut_linux(target, shortcut_path):
    """Linuxæ¡Œé¢æ–‡ä»¶åˆ›å»º"""
    desktop_content = f"""[Desktop Entry]
Version=1.0
Type=Application
Name=æ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ
Exec={target}
Path={Path(target).parent}
Terminal=false
Categories=Utility;
"""
    with open(shortcut_path, 'w') as f:
        f.write(desktop_content)
```

### 3. é…ç½®ç®¡ç†

#### é…ç½®æ›´æ–°é€»è¾‘

```python
def update_config(install_path, storage_path):
    """æ›´æ–°é…ç½®æ–‡ä»¶"""
    config_path = Path(install_path) / 'config.json'

    # è¯»å–ç°æœ‰é…ç½®
    with open(config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)

    # æ›´æ–°è·¯å¾„é…ç½®
    config['storage']['base_path'] = str(storage_path)
    config['database']['path'] = str(storage_path / 'photos.db')

    # ä¿å­˜é…ç½®
    with open(config_path, 'w', encoding='utf-8') as f:
        json.dump(config, f, indent=2, ensure_ascii=False)
```

#### é…ç½®éªŒè¯

```python
def validate_config(config_path):
    """éªŒè¯é…ç½®æ–‡ä»¶"""
    required_keys = [
        'storage.base_path',
        'database.path',
        'logging.file_path'
    ]

    with open(config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)

    for key in required_keys:
        if not get_nested_value(config, key.split('.')):
            raise ValueError(f"ç¼ºå°‘å¿…éœ€é…ç½®é¡¹: {key}")

    return True
```

### 4. é”™è¯¯å¤„ç†å’Œæ—¥å¿—

#### å¼‚å¸¸å¤„ç†æ¶æ„

```python
class InstallationError(Exception):
    """å®‰è£…é”™è¯¯åŸºç±»"""
    pass

class PathError(InstallationError):
    """è·¯å¾„ç›¸å…³é”™è¯¯"""
    pass

class PermissionError(InstallationError):
    """æƒé™ç›¸å…³é”™è¯¯"""
    pass

class ValidationError(InstallationError):
    """éªŒè¯ç›¸å…³é”™è¯¯"""
    pass
```

#### æ—¥å¿—è®°å½•

```python
import logging

def setup_installation_logging():
    """è®¾ç½®å®‰è£…æ—¥å¿—"""
    logging.basicConfig(
        filename='installation.log',
        level=logging.INFO,
        format='%(asctime)s - %(levelname)s - %(message)s'
    )
```

### 5. ç”¨æˆ·ç•Œé¢è®¾è®¡

#### æ§åˆ¶å°ç•Œé¢

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ                          â•‘
â•‘                       å®‰è£…ç¨‹åº                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ æ­¥éª¤1: é€‰æ‹©å®‰è£…è·¯å¾„
è¯·è¾“å…¥å®‰è£…è·¯å¾„ (é»˜è®¤: C:\Program Files\PhotoSystem):

ğŸ“ æ­¥éª¤2: é€‰æ‹©å­˜å‚¨è·¯å¾„
è¯·è¾“å…¥ç…§ç‰‡å­˜å‚¨è·¯å¾„ (é»˜è®¤: C:\Users\ç”¨æˆ·å\Documents\PhotoSystem):

ğŸ“¦ æ­¥éª¤3: å¤åˆ¶ç¨‹åºæ–‡ä»¶
âœ… å¤åˆ¶æ–‡ä»¶: main.py
âœ… å¤åˆ¶æ–‡ä»¶: config.json
âœ… å¤åˆ¶ç›®å½•: app
...

âš™ï¸ æ­¥éª¤4: æ›´æ–°é…ç½®æ–‡ä»¶
âœ… é…ç½®å·²æ›´æ–°: C:\Program Files\PhotoSystem\config.json

ğŸ”— æ­¥éª¤5: åˆ›å»ºå¿«æ·æ–¹å¼
âœ… æ¡Œé¢å¿«æ·æ–¹å¼å·²åˆ›å»º
```

#### è¿›åº¦æŒ‡ç¤º

```python
def show_progress(current, total, message=""):
    """æ˜¾ç¤ºå®‰è£…è¿›åº¦"""
    percentage = int(current / total * 100)
    bar_length = 40
    filled_length = int(bar_length * current / total)

    bar = 'â–ˆ' * filled_length + 'â–‘' * (bar_length - filled_length)

    print(f"\r[{bar}] {percentage}% {message}", end='', flush=True)

    if current == total:
        print()  # æ¢è¡Œ
```

---

## æµ‹è¯•å’ŒéªŒè¯

### 1. å•å…ƒæµ‹è¯•

#### å®‰è£…è„šæœ¬æµ‹è¯•

```python
import unittest
from installer import PhotoSystemInstaller

class TestInstaller(unittest.TestCase):

    def test_path_validation(self):
        """æµ‹è¯•è·¯å¾„éªŒè¯åŠŸèƒ½"""
        installer = PhotoSystemInstaller()

        # æµ‹è¯•æœ‰æ•ˆè·¯å¾„
        self.assertTrue(installer._validate_path("/valid/path"))

        # æµ‹è¯•æ— æ•ˆè·¯å¾„
        self.assertFalse(installer._validate_path(""))

    def test_config_update(self):
        """æµ‹è¯•é…ç½®æ›´æ–°åŠŸèƒ½"""
        # åˆ›å»ºæµ‹è¯•é…ç½®
        test_config = {
            "storage": {"base_path": "/old/path"},
            "database": {"path": "/old/db"}
        }

        # æ›´æ–°é…ç½®
        updated_config = installer._update_config_paths(
            test_config, "/new/storage", "/new/db"
        )

        # éªŒè¯æ›´æ–°ç»“æœ
        self.assertEqual(updated_config["storage"]["base_path"], "/new/storage")
        self.assertEqual(updated_config["database"]["path"], "/new/db")
```

#### æ‰“åŒ…é…ç½®æµ‹è¯•

```python
import subprocess
import sys

def test_pyinstaller_build():
    """æµ‹è¯•PyInstalleræ‰“åŒ…"""
    result = subprocess.run([
        sys.executable, '-m', 'PyInstaller',
        '--clean', 'main.spec'
    ], capture_output=True, text=True)

    assert result.returncode == 0, f"æ‰“åŒ…å¤±è´¥: {result.stderr}"
    assert Path('dist/PhotoSystem').exists(), "è¾“å‡ºç›®å½•ä¸å­˜åœ¨"
```

### 2. é›†æˆæµ‹è¯•

#### å®Œæ•´å®‰è£…æµç¨‹æµ‹è¯•

```python
def test_full_installation():
    """æµ‹è¯•å®Œæ•´å®‰è£…æµç¨‹"""
    # åˆ›å»ºä¸´æ—¶ç›®å½•
    temp_dir = tempfile.mkdtemp()
    install_dir = Path(temp_dir) / "install"
    storage_dir = Path(temp_dir) / "storage"

    try:
        # è¿è¡Œå®‰è£…ç¨‹åº
        installer = PhotoSystemInstaller()
        installer.install_path = install_dir
        installer.storage_path = storage_dir

        success = installer.run()

        # éªŒè¯å®‰è£…ç»“æœ
        assert success, "å®‰è£…å¤±è´¥"
        assert install_dir.exists(), "å®‰è£…ç›®å½•ä¸å­˜åœ¨"
        assert storage_dir.exists(), "å­˜å‚¨ç›®å½•ä¸å­˜åœ¨"
        assert (install_dir / "config.json").exists(), "é…ç½®æ–‡ä»¶ä¸å­˜åœ¨"

        # éªŒè¯é…ç½®æ­£ç¡®æ€§
        with open(install_dir / "config.json") as f:
            config = json.load(f)
            assert config["storage"]["base_path"] == str(storage_dir)

    finally:
        # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
        shutil.rmtree(temp_dir)
```

#### è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•

```python
def test_cross_platform_compatibility():
    """æµ‹è¯•è·¨å¹³å°å…¼å®¹æ€§"""
    installer = PhotoSystemInstaller()

    # æµ‹è¯•ä¸åŒå¹³å°çš„è·¯å¾„å¤„ç†
    for platform_name in ['windows', 'linux', 'darwin']:
        installer.system = platform_name
        path = installer._get_default_install_path()

        if platform_name == 'windows':
            assert 'Program Files' in str(path)
        elif platform_name == 'linux':
            assert '/opt' in str(path)
        elif platform_name == 'darwin':
            assert '/Applications' in str(path)
```

### 3. æ€§èƒ½æµ‹è¯•

#### å®‰è£…æ—¶é—´æµ‹è¯•

```python
import time

def test_installation_performance():
    """æµ‹è¯•å®‰è£…æ€§èƒ½"""
    start_time = time.time()

    # è¿è¡Œå®‰è£…
    installer = PhotoSystemInstaller()
    installer.install_path = Path("/tmp/test_install")
    installer.storage_path = Path("/tmp/test_storage")
    installer.run()

    end_time = time.time()
    duration = end_time - start_time

    # éªŒè¯å®‰è£…æ—¶é—´åœ¨åˆç†èŒƒå›´å†…
    assert duration < 60, f"å®‰è£…æ—¶é—´è¿‡é•¿: {duration}ç§’"
```

#### åŒ…ä½“ç§¯æµ‹è¯•

```python
def test_package_size():
    """æµ‹è¯•å®‰è£…åŒ…ä½“ç§¯"""
    # è·å–å®‰è£…åŒ…å¤§å°
    package_size = get_package_size("PhotoSystem-Installer.zip")

    # éªŒè¯åŒ…ä½“ç§¯åœ¨åˆç†èŒƒå›´å†…
    max_size = 500 * 1024 * 1024  # 500MB
    assert package_size < max_size, f"åŒ…ä½“ç§¯è¿‡å¤§: {package_size} bytes"
```

### 4. å…¼å®¹æ€§æµ‹è¯•

#### æ“ä½œç³»ç»Ÿå…¼å®¹æ€§

| æ“ä½œç³»ç»Ÿ | Pythonç‰ˆæœ¬ | æµ‹è¯•çŠ¶æ€ |
|---------|-----------|---------|
| Windows 10 | 3.8, 3.9, 3.10, 3.11 | âœ… é€šè¿‡ |
| Windows 11 | 3.8, 3.9, 3.10, 3.11 | âœ… é€šè¿‡ |
| Ubuntu 18.04 | 3.8+ | âœ… é€šè¿‡ |
| Ubuntu 20.04 | 3.8+ | âœ… é€šè¿‡ |
| macOS 10.15 | 3.8+ | âœ… é€šè¿‡ |
| macOS 12.0 | 3.8+ | âœ… é€šè¿‡ |

#### ç¡¬ä»¶é…ç½®æµ‹è¯•

- **æœ€ä½é…ç½®**: 4GB RAM, 50GBå­˜å‚¨ âœ…
- **æ¨èé…ç½®**: 8GB RAM, 100GBå­˜å‚¨ âœ…
- **é«˜é…ç¯å¢ƒ**: 16GB RAM, 500GB SSD âœ…

---

## éƒ¨ç½²å’Œç»´æŠ¤

### 1. ç‰ˆæœ¬ç®¡ç†

#### ç‰ˆæœ¬å·è§„åˆ™

```
ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬[-æ ‡ç­¾]

ç¤ºä¾‹:
1.0.0        # æ­£å¼ç‰ˆæœ¬
1.0.1        # è¡¥ä¸ç‰ˆæœ¬
1.1.0        # å°ç‰ˆæœ¬æ›´æ–°
2.0.0        # å¤§ç‰ˆæœ¬æ›´æ–°
1.0.0-alpha  # é¢„è§ˆç‰ˆæœ¬
1.0.0-rc1    # å€™é€‰ç‰ˆæœ¬
```

#### ç‰ˆæœ¬æ–‡ä»¶ç»“æ„

```
releases/
â”œâ”€â”€ v1.0.0/
â”‚   â”œâ”€â”€ PhotoSystem-Installer.zip
â”‚   â”œâ”€â”€ PhotoSystem-Installer.tar.gz
â”‚   â”œâ”€â”€ checksums.txt
â”‚   â””â”€â”€ release-notes.md
â”œâ”€â”€ v1.0.1/
â”‚   â””â”€â”€ ...
â””â”€â”€ latest/ -> v1.0.1/
```

### 2. åˆ†å‘æ¸ é“

#### å®˜æ–¹æ¸ é“
- **GitHub Releases**: ä¸»è¦åˆ†å‘æ¸ é“
- **å®˜æ–¹ç½‘ç«™**: ä¸‹è½½é¡µé¢
- **æ–‡æ¡£ç½‘ç«™**: åœ¨çº¿æ–‡æ¡£

#### ç¬¬ä¸‰æ–¹æ¸ é“
- **åº”ç”¨å•†åº—**: å„å¹³å°åº”ç”¨å•†åº—
- **è½¯ä»¶ä¸‹è½½ç«™**: ä¸»æµä¸‹è½½ç½‘ç«™
- **åŒ…ç®¡ç†å™¨**: é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…

### 3. æ›´æ–°æœºåˆ¶

#### è‡ªåŠ¨æ›´æ–°
```python
def check_for_updates():
    """æ£€æŸ¥æ›´æ–°"""
    current_version = get_current_version()
    latest_version = get_latest_version_from_server()

    if latest_version > current_version:
        return True, latest_version
    return False, None

def perform_update():
    """æ‰§è¡Œæ›´æ–°"""
    # ä¸‹è½½æ–°ç‰ˆæœ¬
    # å¤‡ä»½å½“å‰é…ç½®
    # å®‰è£…æ–°ç‰ˆæœ¬
    # æ¢å¤é…ç½®
    # æ¸…ç†æ—§ç‰ˆæœ¬
```

#### æ‰‹åŠ¨æ›´æ–°
1. ä¸‹è½½æ–°ç‰ˆæœ¬å®‰è£…åŒ…
2. å¤‡ä»½ç”¨æˆ·æ•°æ®å’Œé…ç½®
3. å¸è½½æ—§ç‰ˆæœ¬
4. å®‰è£…æ–°ç‰ˆæœ¬
5. æ¢å¤é…ç½®å’Œæ•°æ®

### 4. ç›‘æ§å’Œæ—¥å¿—

#### å®‰è£…ç›‘æ§
- å®‰è£…æˆåŠŸç‡ç»Ÿè®¡
- é”™è¯¯ç±»å‹åˆ†æ
- ç”¨æˆ·åé¦ˆæ”¶é›†
- æ€§èƒ½æŒ‡æ ‡ç›‘æ§

#### ä½¿ç”¨ç›‘æ§
- å¯åŠ¨æ—¶é—´ç»Ÿè®¡
- åŠŸèƒ½ä½¿ç”¨æƒ…å†µ
- é”™è¯¯æ—¥å¿—æ”¶é›†
- æ€§èƒ½æŒ‡æ ‡ç›‘æ§

### 5. æ”¯æŒæœåŠ¡

#### ç”¨æˆ·æ”¯æŒ
- **åœ¨çº¿æ–‡æ¡£**: è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
- **FAQ**: å¸¸è§é—®é¢˜è§£ç­”
- **ç¤¾åŒºè®ºå›**: ç”¨æˆ·äº¤æµå¹³å°
- **æŠ€æœ¯æ”¯æŒ**: é‚®ä»¶å’Œåœ¨çº¿å®¢æœ

#### ä¼ä¸šæ”¯æŒ
- **ä¼˜å…ˆæ”¯æŒ**: ä¼ä¸šç”¨æˆ·çš„å¿«é€Ÿå“åº”
- **å®šåˆ¶æœåŠ¡**: é’ˆå¯¹æ€§è§£å†³æ–¹æ¡ˆ
- **åŸ¹è®­æœåŠ¡**: ä¸“ä¸šçš„æŠ€æœ¯åŸ¹è®­
- **å’¨è¯¢æœåŠ¡**: æŠ€æœ¯æ¶æ„å’¨è¯¢

---

## é£é™©è¯„ä¼°ä¸åº”å¯¹

### 1. æŠ€æœ¯é£é™©

#### PyInstallerå…¼å®¹æ€§é£é™©
- **é£é™©ç­‰çº§**: ä¸­ç­‰
- **å½±å“**: æŸäº›ä¾èµ–å¯èƒ½æ— æ³•æ­£ç¡®æ‰“åŒ…
- **åº”å¯¹ç­–ç•¥**:
  - ä½¿ç”¨ `--hidden-import` æ˜ç¡®æŒ‡å®šä¾èµ–
  - æµ‹è¯•ä¸åŒPythonç‰ˆæœ¬çš„å…¼å®¹æ€§
  - å‡†å¤‡å¤‡ç”¨æ‰“åŒ…æ–¹æ¡ˆ

#### è·¨å¹³å°å…¼å®¹æ€§é£é™©
- **é£é™©ç­‰çº§**: ä¸­ç­‰
- **å½±å“**: åœ¨æŸäº›å¹³å°ä¸Šå¯èƒ½å‡ºç°å…¼å®¹æ€§é—®é¢˜
- **åº”å¯¹ç­–ç•¥**:
  - åœ¨å¤šç§å¹³å°ä¸Šè¿›è¡Œå……åˆ†æµ‹è¯•
  - ä½¿ç”¨æ¡ä»¶ç¼–è¯‘å¤„ç†å¹³å°å·®å¼‚
  - æä¾›å¹³å°ç‰¹å®šçš„å®‰è£…è„šæœ¬

#### ä¾èµ–ç‰ˆæœ¬å†²çªé£é™©
- **é£é™©ç­‰çº§**: ä½
- **å½±å“**: ä¸åŒç‰ˆæœ¬çš„ä¾èµ–å¯èƒ½å¯¼è‡´é—®é¢˜
- **åº”å¯¹ç­–ç•¥**:
  - ä½¿ç”¨ `requirements.txt` å›ºå®šä¾èµ–ç‰ˆæœ¬
  - å®šæœŸæ›´æ–°å’Œæµ‹è¯•ä¾èµ–å…¼å®¹æ€§
  - æä¾›è™šæ‹Ÿç¯å¢ƒå®‰è£…é€‰é¡¹

### 2. ç”¨æˆ·ä½“éªŒé£é™©

#### å®‰è£…å¤±è´¥é£é™©
- **é£é™©ç­‰çº§**: é«˜
- **å½±å“**: ç”¨æˆ·æ— æ³•å®Œæˆå®‰è£…
- **åº”å¯¹ç­–ç•¥**:
  - æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
  - å®ç°è‡ªåŠ¨å›æ»šæœºåˆ¶
  - æä¾›å¤šç§å®‰è£…æ–¹å¼é€‰æ‹©

#### é…ç½®é”™è¯¯é£é™©
- **é£é™©ç­‰çº§**: ä¸­ç­‰
- **å½±å“**: ç³»ç»Ÿæ— æ³•æ­£å¸¸å·¥ä½œ
- **åº”å¯¹ç­–ç•¥**:
  - æä¾›é…ç½®éªŒè¯æœºåˆ¶
  - è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤å¸¸è§é…ç½®é—®é¢˜
  - æä¾›é»˜è®¤é…ç½®æ¢å¤åŠŸèƒ½

### 3. å®‰å…¨é£é™©

#### æ–‡ä»¶æƒé™é£é™©
- **é£é™©ç­‰çº§**: ä¸­ç­‰
- **å½±å“**: ç³»ç»Ÿæ–‡ä»¶å¯èƒ½è¢«æ¶æ„ä¿®æ”¹
- **åº”å¯¹ç­–ç•¥**:
  - è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
  - éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
  - ä½¿ç”¨æ•°å­—ç­¾åéªŒè¯å®‰è£…åŒ…

#### æ•°æ®å®‰å…¨é£é™©
- **é£é™©ç­‰çº§**: é«˜
- **å½±å“**: ç”¨æˆ·æ•°æ®å¯èƒ½æ³„éœ²
- **åº”å¯¹ç­–ç•¥**:
  - ä¸åœ¨å®‰è£…åŒ…ä¸­åŒ…å«æ•æ„Ÿä¿¡æ¯
  - æä¾›å®‰å…¨çš„é…ç½®ç®¡ç†æœºåˆ¶
  - å®ç°æ•°æ®åŠ å¯†åŠŸèƒ½

### 4. æ€§èƒ½é£é™©

#### å¯åŠ¨é€Ÿåº¦é£é™©
- **é£é™©ç­‰çº§**: ä¸­ç­‰
- **å½±å“**: åº”ç”¨ç¨‹åºå¯åŠ¨è¿‡æ…¢
- **åº”å¯¹ç­–ç•¥**:
  - ä¼˜åŒ–PyInstalleré…ç½®
  - ä½¿ç”¨UPXå‹ç¼©å¯æ‰§è¡Œæ–‡ä»¶
  - å®ç°å»¶è¿ŸåŠ è½½æœºåˆ¶

#### åŒ…ä½“ç§¯é£é™©
- **é£é™©ç­‰çº§**: ä½
- **å½±å“**: å®‰è£…åŒ…è¿‡å¤§å½±å“ä¸‹è½½
- **åº”å¯¹ç­–ç•¥**:
  - æ’é™¤ä¸å¿…è¦çš„ä¾èµ–å’Œæ–‡ä»¶
  - ä½¿ç”¨æ›´é«˜æ•ˆçš„å‹ç¼©ç®—æ³•
  - æä¾›åˆ†å·ä¸‹è½½é€‰é¡¹

### 5. åº”å¯¹æªæ–½

#### é£é™©ç›‘æ§
- å»ºç«‹é£é™©ç›‘æ§æœºåˆ¶
- å®šæœŸè¿›è¡Œé£é™©è¯„ä¼°
- å®æ–½æŒç»­æ”¹è¿›æªæ–½

#### åº”æ€¥é¢„æ¡ˆ
- åˆ¶å®šè¯¦ç»†çš„åº”æ€¥å“åº”è®¡åˆ’
- å»ºç«‹æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ
- å‡†å¤‡å¤‡ç”¨è§£å†³æ–¹æ¡ˆ

#### ç”¨æˆ·æ²Ÿé€š
- åŠæ—¶å‘ç”¨æˆ·é€šæŠ¥é£é™©å’Œè§£å†³æ–¹æ¡ˆ
- æä¾›é€æ˜çš„æ›´æ–°æ—¥å¿—
- å»ºç«‹ç”¨æˆ·åé¦ˆæœºåˆ¶

---

## æ€»ç»“ä¸å±•æœ›

### é¡¹ç›®æˆæœ

æœ¬æ¬¡å®‰è£…åŒ…è®¾è®¡ä¸å®ç°é¡¹ç›®æˆåŠŸå®Œæˆäº†ä»¥ä¸‹ç›®æ ‡ï¼š

1. **âœ… ç”¨æˆ·å‹å¥½**: å®ç°äº†ä¸€é”®å®‰è£…çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ
2. **âœ… è·¨å¹³å°å…¼å®¹**: æ”¯æŒWindowsã€Linuxã€macOSä¸‰å¤§å¹³å°
3. **âœ… è‡ªåŠ¨åŒ–é…ç½®**: æ™ºèƒ½è·¯å¾„é€‰æ‹©å’Œé…ç½®æ–‡ä»¶è‡ªåŠ¨æ›´æ–°
4. **âœ… å®Œæ•´åŠŸèƒ½**: åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶å’Œä¾èµ–
5. **âœ… å®‰å…¨å¯é **: å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯æœºåˆ¶

### æŠ€æœ¯äº®ç‚¹

1. **PyInstalleræ·±åº¦ä¼˜åŒ–**: é€šè¿‡ç²¾å¿ƒé…ç½®å®ç°æœ€ä½³æ‰“åŒ…æ•ˆæœ
2. **è·¨å¹³å°æ¶æ„è®¾è®¡**: ç»Ÿä¸€çš„å®‰è£…ä½“éªŒï¼Œå¹³å°ç‰¹å®šçš„ä¼˜åŒ–
3. **æ™ºèƒ½é…ç½®ç®¡ç†**: è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒå¹¶ä¼˜åŒ–é…ç½®
4. **ç”¨æˆ·ä½“éªŒè®¾è®¡**: å‹å¥½çš„ç•Œé¢å’Œè¯¦ç»†çš„åé¦ˆä¿¡æ¯
5. **å®Œæ•´æµ‹è¯•è¦†ç›–**: ä»å•å…ƒæµ‹è¯•åˆ°é›†æˆæµ‹è¯•çš„å…¨é¢éªŒè¯

### åº”ç”¨ä»·å€¼

1. **é™ä½ç”¨æˆ·é—¨æ§›**: æ— éœ€æŠ€æœ¯èƒŒæ™¯å³å¯å®Œæˆå®‰è£…
2. **æå‡ç”¨æˆ·æ»¡æ„åº¦**: æµç•…çš„å®‰è£…ä½“éªŒå’Œå®Œå–„çš„åŠŸèƒ½
3. **å‡å°‘æ”¯æŒæˆæœ¬**: è‡ªåŠ¨åŒ–å®‰è£…å‡å°‘äº†æŠ€æœ¯æ”¯æŒéœ€æ±‚
4. **æ‰©å¤§ç”¨æˆ·ç¾¤ä½“**: è·¨å¹³å°æ”¯æŒè¦†ç›–æ›´å¤šæ½œåœ¨ç”¨æˆ·
5. **æå‡å“ç‰Œå½¢è±¡**: ä¸“ä¸šçº§çš„å®‰è£…ä½“éªŒæ ‘ç«‹å“ç‰Œå½¢è±¡

### æœªæ¥å±•æœ›

#### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)
- **ç”¨æˆ·åé¦ˆæ”¶é›†**: æ”¶é›†çœŸå®ç”¨æˆ·çš„å®‰è£…ä½“éªŒåé¦ˆ
- **æ€§èƒ½ä¼˜åŒ–**: è¿›ä¸€æ­¥ä¼˜åŒ–å®‰è£…åŒ…ä½“ç§¯å’Œå¯åŠ¨é€Ÿåº¦
- **åŠŸèƒ½å®Œå–„**: æ·»åŠ æ›´å¤šçš„è‡ªå®šä¹‰é€‰é¡¹å’Œé«˜çº§åŠŸèƒ½

#### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
- **äº‘ç«¯éƒ¨ç½²**: æ”¯æŒäº‘ç«¯ä¸€é”®éƒ¨ç½²åŠŸèƒ½
- **ç§»åŠ¨ç«¯æ”¯æŒ**: å¼€å‘ç§»åŠ¨ç«¯çš„å®‰è£…åŒ…
- **å›½é™…åŒ–**: æ”¯æŒå¤šè¯­è¨€å®‰è£…ç•Œé¢

#### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
- **æ™ºèƒ½å®‰è£…**: åŸºäºç”¨æˆ·ç¯å¢ƒçš„æ™ºèƒ½æ¨èé…ç½®
- **æŒç»­æ›´æ–°**: å®ç°è‡ªåŠ¨æ›´æ–°æœºåˆ¶
- **ç”Ÿæ€å»ºè®¾**: å»ºç«‹å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿå’Œå¼€å‘è€…å·¥å…·

### æŠ€æœ¯å±•æœ›

1. **å®¹å™¨åŒ–éƒ¨ç½²**: æ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²
2. **å¾®æœåŠ¡æ¶æ„**: æ¨¡å—åŒ–éƒ¨ç½²å’Œç‹¬ç«‹æ›´æ–°
3. **AIè¾…åŠ©å®‰è£…**: æ™ºèƒ½è¯Šæ–­å’Œè‡ªåŠ¨ä¿®å¤åŠŸèƒ½
4. **åŒºå—é“¾éªŒè¯**: ä½¿ç”¨åŒºå—é“¾æŠ€æœ¯éªŒè¯å®‰è£…åŒ…å®Œæ•´æ€§

### ç»“è¯­

æœ¬æ¬¡å®‰è£…åŒ…è®¾è®¡ä¸å®ç°é¡¹ç›®ä¸ä»…è§£å†³äº†å½“å‰çš„ç”¨æˆ·å®‰è£…éœ€æ±‚ï¼Œæ›´ä¸ºé¡¹ç›®çš„é•¿æœŸå‘å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æŠ€æœ¯åˆ›æ–°å’Œç”¨æˆ·ä½“éªŒçš„æŒç»­ä¼˜åŒ–ï¼Œæˆ‘ä»¬å°†ä¸ºç”¨æˆ·æä¾›è¶Šæ¥è¶Šä¼˜è´¨çš„äº§å“å’ŒæœåŠ¡ã€‚

**æ„Ÿè°¢æ‰€æœ‰å‚ä¸é¡¹ç›®çš„äººå‘˜ï¼Œæ„Ÿè°¢ç”¨æˆ·çš„æ”¯æŒå’Œåé¦ˆï¼è®©æˆ‘ä»¬ç»§ç»­åŠªåŠ›ï¼Œä¸ºç”¨æˆ·åˆ›é€ æ›´å¥½çš„ä½“éªŒï¼** ğŸš€âœ¨

---

## é™„å½•

### æŠ€æœ¯è§„æ ¼è¡¨

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|-----|------|------|
| PyInstaller | 6.0+ | Pythonåº”ç”¨æ‰“åŒ…å·¥å…· |
| Python | 3.8-3.11 | è¿è¡Œç¯å¢ƒ |
| Windows | 10/11 | æ”¯æŒçš„æ“ä½œç³»ç»Ÿ |
| Linux | Ubuntu 18.04+ | æ”¯æŒçš„æ“ä½œç³»ç»Ÿ |
| macOS | 10.15+ | æ”¯æŒçš„æ“ä½œç³»ç»Ÿ |

### æ–‡ä»¶æ¸…å•

#### æ ¸å¿ƒæ–‡ä»¶
- `main.py` - ä¸»ç¨‹åºæ–‡ä»¶
- `main.spec` - PyInstalleré…ç½®
- `installer.py` - å®‰è£…è„šæœ¬
- `config.json` - ç”¨æˆ·é…ç½®
- `config_default.json` - é»˜è®¤é…ç½®

#### è„šæœ¬æ–‡ä»¶
- `install.bat` - Windowså®‰è£…è„šæœ¬
- `install.sh` - Linux/macOSå®‰è£…è„šæœ¬
- `build_installer.bat` - Windowsæ‰“åŒ…è„šæœ¬
- `build_installer.sh` - Linux/macOSæ‰“åŒ…è„šæœ¬

#### æ–‡æ¡£æ–‡ä»¶
- `README.md` - é¡¹ç›®è¯´æ˜
- `INSTALL_README.md` - å®‰è£…æŒ‡å—
- `PACKAGING_README.md` - æ‰“åŒ…æŒ‡å—
- `å®‰è£…åŒ…è®¾è®¡ä¸å®ç°è¯¦ç»†æ–‡æ¡£.md` - æœ¬æ–‡æ¡£

### ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|-----|------|---------|
| 1.0.0 | 2025-09-17 | åˆå§‹ç‰ˆæœ¬å‘å¸ƒ |

---

**æ–‡æ¡£ç»“æŸ** ğŸ“„

*æœ¬è®¾è®¡æ–‡æ¡£å—ç‰ˆæƒä¿æŠ¤ï¼Œæœªç»æˆæƒä¸å¾—å¤åˆ¶æˆ–åˆ†å‘* Â© 2025 å®¶åº­ç‰ˆæ™ºèƒ½ç…§ç‰‡ç³»ç»Ÿ
