# 家庭版智能照片系统 - 用户配置管理使用指南

## 一、文档基础信息

| 项目名称 | 家庭版智能照片系统 | 文档类型 | 用户配置管理使用指南 |
| -------- | ------------------------- | -------- | ------------------- |
| 文档版本 | V1.0 | 文档状态 | ☑ 已完成 |
| 编写人 | AI助手 | 编写日期 | 2025年1月19日 |
| 目标用户 | 家庭用户 | 使用场景 | 日常照片管理配置 |

## 二、配置管理概述

### 2.1 什么是配置管理

配置管理是系统提供的参数调整功能，让您可以根据个人需求自定义系统行为，包括：
- **存储位置**：选择照片和数据库的存储位置
- **AI服务**：配置AI分析功能
- **界面设置**：调整显示效果
- **搜索设置**：优化搜索体验

### 2.2 如何访问配置管理

1. 启动系统后，在浏览器中访问：`http://127.0.0.1:8000/settings`
2. 或者点击系统界面右上角的"设置"按钮

## 三、配置参数详解

### 3.1 AI服务设置

#### 3.1.1 大模型选择
- **作用**：选择用于照片分析的AI模型
- **可选模型**：qwen-vl-plus、qwen-vl-plus-latest、qwen-vl-plus-2025-08-15、qwen-vl-plus-2025-05-07、qwen-vl-plus-2025-01-25
- **推荐设置**：qwen-vl-plus（稳定版本）
- **如何设置**：从下拉菜单中选择，页面会显示当前值和默认值
- **实时更新**：选择后会立即更新显示的当前值

#### 3.1.2 API密钥
- **作用**：访问AI服务的身份验证
- **获取方式**：
  1. 访问 https://dashscope.aliyuncs.com/
  2. 注册账号并获取API Key
  3. 在配置页面填入此字段
- **安全提示**：优先使用环境变量DASHSCOPE_API_KEY，避免在配置文件中明文存储
- **帮助功能**：点击"如何获取API密钥"按钮可查看详细说明
- **当前状态**：页面会显示API密钥是否已设置

### 3.2 存储设置

#### 3.2.1 照片存储目录
- **作用**：设置照片文件的存储位置
- **推荐位置**：`D:\Photos` 或 `C:\Users\用户名\Pictures\智能照片`
- **如何设置**：
  1. 在文本框中直接输入路径，或点击文件夹图标按钮
  2. 点击文件夹图标会在本地打开目录选择对话框
  3. 系统会自动填入完整路径
- **重要提醒**：更改存储目录前，请先将原目录下的所有照片数据复制到新目录
- **远程访问限制**：此功能仅限本地访问，远程访问时不可见
- **当前值显示**：页面会显示当前配置值和默认值

#### 3.2.2 照片大小限制
- **作用**：限制单张照片的最大文件大小
- **可选值**：25MB、50MB、100MB、200MB
- **默认值**：50MB
- **如何设置**：从下拉菜单中选择
- **当前值显示**：页面会显示当前配置值和默认值

#### 3.2.3 缩略图质量
- **作用**：控制缩略图的压缩质量
- **推荐值**：50%（适合大多数场景，减小存储空间）
- **范围**：1-100%
- **如何设置**：拖动滑块调整，实时显示当前值
- **当前值显示**：页面会显示当前配置值和默认值

#### 3.2.4 缩略图尺寸
- **作用**：控制缩略图的显示尺寸
- **推荐值**：300像素（适合大多数屏幕）
- **范围**：100-1000像素
- **如何设置**：拖动滑块调整，实时显示当前值
- **当前值显示**：页面会显示当前配置值和默认值

### 3.3 界面设置

#### 3.3.1 每页显示照片数
- **作用**：控制照片列表每页显示的照片数量
- **可选值**：6张、12张、18张、24张、30张
- **默认值**：12张
- **如何设置**：从下拉菜单中选择
- **当前值显示**：页面会显示当前配置值和默认值

#### 3.3.2 相似照片显示数量
- **作用**：控制相似照片推荐的数量
- **可选值**：4张、8张、12张
- **默认值**：8张
- **如何设置**：从下拉菜单中选择
- **当前值显示**：页面会显示当前配置值和默认值

### 3.4 搜索设置

#### 3.4.1 相似度阈值
- **作用**：控制相似照片的识别敏感度
- **推荐值**：0.6（平衡准确性和召回率）
- **范围**：0.0-1.0
- **如何设置**：拖动滑块调整，实时显示当前值
- **当前值显示**：页面会显示当前配置值和默认值

#### 3.4.2 重复检测阈值
- **作用**：控制重复照片的识别敏感度
- **推荐值**：5（适合大多数情况）
- **范围**：1-20
- **如何设置**：拖动滑块调整，实时显示当前值
- **当前值显示**：页面会显示当前配置值和默认值

## 四、配置操作指南

### 4.1 基本操作流程

1. **打开配置页面**
   - 访问 `http://127.0.0.1:8000/settings`
   - 或点击系统界面右上角的"设置"按钮

2. **查看配置状态**
   - 页面会显示每个配置项的当前值和默认值
   - 可以直观看到哪些配置已被修改

3. **修改配置参数**
   - 根据需要调整各项参数
   - 滑块和选择框会实时显示当前值
   - 修改后"保存配置"按钮会高亮显示

4. **保存配置**
   - 点击"保存配置"按钮
   - 系统会弹出确认对话框
   - 确认后保存配置并重新加载系统

### 4.2 高级操作功能

#### 4.2.1 重置为默认值
- 点击导航栏中的"重置为默认"按钮
- 系统会将所有配置恢复为默认值
- 需要再次保存才能生效

#### 4.2.2 导出配置
- 点击导航栏中的"导出配置"按钮
- 系统会下载完整的配置文件（config.json）
- 可用于备份或在其他系统上使用

#### 4.2.3 获取默认配置值
- 系统会自动从config_default.json加载默认值
- 每个配置项都会显示默认值作为参考
- 有助于了解系统推荐的配置

### 4.3 路径选择操作

#### 4.3.1 选择照片存储目录
1. 点击"照片存储目录"右侧的文件夹图标
2. 系统会在本地打开文件夹选择对话框
3. 选择目标目录后，路径会自动填入文本框
4. 点击"保存配置"保存设置

**注意事项**：
- 此功能仅限本地访问，远程访问时不可见
- 更改存储目录前，请先备份原有照片数据
- 系统会检查路径的有效性和权限

### 4.4 配置验证

#### 4.4.1 路径验证
- 系统会自动验证路径的有效性
- 无效路径会显示错误提示
- 建议选择已存在的目录和文件

#### 4.4.2 权限验证
- 确保选择的目录有读写权限
- 系统会检查权限并显示结果
- 权限不足时会显示错误提示

#### 4.4.3 配置保存验证
- 保存前会弹出确认对话框
- 系统会验证配置的完整性
- 保存成功后会重新加载配置

## 五、常见问题解答

### 5.1 配置相关问题

**Q: 修改配置后为什么没有生效？**
A: 修改配置后需要点击"保存配置"按钮，系统会重新加载配置使其生效。

**Q: 如何恢复默认配置？**
A: 点击导航栏中的"重置为默认"按钮，系统会将所有配置恢复为默认值，然后需要再次保存。

**Q: 配置保存失败怎么办？**
A: 检查网络连接和文件权限，确保系统有写入配置文件的权限。

**Q: 如何备份我的配置？**
A: 点击导航栏中的"导出配置"按钮，可以下载完整的配置文件用于备份。

**Q: 什么是默认值？**
A: 默认值是从config_default.json文件加载的系统推荐配置，每个配置项都会显示默认值作为参考。

### 5.2 路径选择问题

**Q: 为什么无法选择目录？**
A: 此功能仅限本地访问，如果您通过远程访问，可能无法使用目录选择功能。请在本地主机上访问配置页面。

**Q: 选择的路径显示不正确？**
A: 系统会自动转换为绝对路径并验证有效性，这是正常现象。

**Q: 如何手动输入路径？**
A: 可以在文本框中直接输入完整路径，系统会自动验证路径的有效性。

### 5.3 性能相关问题

**Q: 缩略图质量设置多少合适？**
A: 建议设置为50%，这是系统默认值，既能保证质量又能显著减小存储空间。

**Q: 每页显示多少照片合适？**
A: 建议设置为12张，这是系统默认值，适合大多数屏幕尺寸。

**Q: 相似度阈值设置多少合适？**
A: 建议设置为0.6，这是系统默认值，能在准确性和召回率之间取得良好平衡。

**Q: 重复检测阈值设置多少合适？**
A: 建议设置为5，这是系统默认值，适合大多数照片重复检测场景。

## 六、最佳实践建议

### 6.1 存储位置规划

1. **照片存储目录**
   - 选择空间充足的磁盘分区
   - 建议使用SSD提高访问速度
   - 定期备份重要照片

2. **数据库文件位置**
   - 与照片存储目录放在同一位置
   - 便于整体备份和迁移
   - 定期备份数据库文件

### 6.2 性能优化建议

1. **缩略图设置**
   - 质量85%，尺寸300像素
   - 平衡显示效果和存储空间

2. **界面设置**
   - 每页12张照片
   - 相似照片8张
   - 热门标签和分类各10个

3. **搜索设置**
   - 相似度阈值0.8
   - 重复检测阈值5

### 6.3 安全建议

1. **API密钥管理**
   - 使用环境变量存储API密钥
   - 不要在配置文件中明文存储
   - 定期更换API密钥

2. **数据备份**
   - 定期备份照片和数据库
   - 使用系统提供的备份功能
   - 将备份存储在不同位置

## 七、技术支持

### 7.1 获取帮助

- 查看系统日志了解详细错误信息
- 检查配置文件格式是否正确
- 确认系统权限设置

### 7.2 联系支持

- 系统问题：查看日志文件
- 配置问题：参考本文档
- 功能问题：查看详细设计文档

---

**文档版本**：V2.0
**最后更新**：2025年9月17日
**文档状态**：草稿

**更新说明**：
- 更新配置界面说明，反映实际的配置页面设计
- 完善配置参数说明，基于实际的配置结构
- 更新配置修改流程，增加保存和验证步骤
- 补充故障排除指南，增加常见配置问题
- 增加配置备份和恢复说明
- 更新系统要求和兼容性说明

**更新说明**：
- 根据实际配置页面重新编写所有配置参数说明
- 增加AI模型选择的具体选项和帮助功能说明
- 更新存储设置，移除数据库文件位置配置（已从界面移除）
- 修正照片大小限制的可选值（25MB/50MB/100MB/200MB）
- 更新缩略图质量默认值（50%）
- 更新相似度阈值默认值（0.6）
- 增加重复检测阈值配置说明（范围1-20）
- 完善界面设置的可选值说明
- 添加高级功能：重置配置、导出配置、默认值显示
- 更新操作流程，增加确认对话框和实时反馈
- 补充远程访问限制说明
- 更新常见问题解答，反映实际功能

**注意**：本指南基于系统V2.0版本编写，已完全同步实际配置页面的功能和界面。
