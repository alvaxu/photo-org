# 家庭单机版智能照片整理系统 - 用户配置管理使用指南

## 一、文档基础信息

| 项目名称 | 家庭单机版智能照片整理系统 | 文档类型 | 用户配置管理使用指南 |
| -------- | ------------------------- | -------- | ------------------- |
| 文档版本 | V1.0 | 文档状态 | ☑ 已完成 |
| 编写人 | AI助手 | 编写日期 | 2025年1月19日 |
| 目标用户 | 家庭用户 | 使用场景 | 日常照片管理配置 |

## 二、配置管理概述

### 2.1 什么是配置管理

配置管理是系统提供的参数调整功能，让您可以根据个人需求自定义系统行为，包括：
- **存储位置**：选择照片和数据库的存储位置
- **AI服务**：配置AI分析功能
- **界面设置**：调整显示效果
- **搜索设置**：优化搜索体验

### 2.2 如何访问配置管理

1. 启动系统后，在浏览器中访问：`http://127.0.0.1:8000/settings`
2. 或者点击系统界面右上角的"设置"按钮

## 三、配置参数详解

### 3.1 AI服务设置

#### 3.1.1 大模型选择
- **作用**：选择用于照片分析的AI模型
- **推荐设置**：qwen-vl-plus-latest（最新版本）
- **如何设置**：从下拉菜单中选择

#### 3.1.2 API密钥
- **作用**：访问AI服务的身份验证
- **获取方式**：
  1. 访问 https://dashscope.aliyuncs.com/
  2. 注册账号并获取API Key
  3. 填入此字段
- **安全提示**：建议使用环境变量设置，避免在配置文件中明文存储

### 3.2 存储设置

#### 3.2.1 照片存储目录
- **作用**：设置照片文件的存储位置
- **推荐位置**：`D:\Photos` 或 `C:\Users\用户名\Pictures\智能照片整理`
- **如何设置**：
  1. 点击"选择目录"按钮
  2. 在弹出的文件夹选择对话框中选择目标目录
  3. 系统会自动填入完整路径

#### 3.2.2 数据库文件位置
- **作用**：设置数据库文件的存储位置
- **推荐位置**：与照片存储目录相同，便于备份
- **如何设置**：
  1. 点击"选择文件"按钮
  2. 选择现有的数据库文件，或选择新位置创建
  3. 系统会自动填入完整路径

#### 3.2.3 缩略图质量
- **作用**：控制缩略图的压缩质量
- **推荐值**：85%（平衡质量和文件大小）
- **范围**：1-100%
- **如何设置**：拖动滑块调整

#### 3.2.4 缩略图尺寸
- **作用**：控制缩略图的显示尺寸
- **推荐值**：300像素（适合大多数屏幕）
- **范围**：100-1000像素
- **如何设置**：拖动滑块调整

#### 3.2.5 文件大小限制
- **作用**：限制单张照片的最大文件大小
- **推荐值**：50MB（适合大多数照片）
- **选项**：25MB/50MB/100MB/200MB
- **如何设置**：从下拉菜单中选择

### 3.3 界面设置

#### 3.3.1 每页显示照片数
- **作用**：控制照片列表每页显示的照片数量
- **推荐值**：12张（适合大多数屏幕）
- **范围**：6-24张
- **如何设置**：拖动滑块调整

#### 3.3.2 相似照片显示数量
- **作用**：控制相似照片推荐的数量
- **推荐值**：8张（平衡相关性和性能）
- **范围**：4-16张
- **如何设置**：拖动滑块调整

#### 3.3.3 热门标签显示数量
- **作用**：控制热门标签显示的数量
- **推荐值**：10个（适合快速浏览）
- **范围**：5-20个
- **如何设置**：拖动滑块调整

#### 3.3.4 热门分类显示数量
- **作用**：控制热门分类显示的数量
- **推荐值**：10个（适合快速浏览）
- **范围**：5-20个
- **如何设置**：拖动滑块调整

### 3.4 搜索设置

#### 3.4.1 相似度阈值
- **作用**：控制相似照片的识别敏感度
- **推荐值**：0.8（平衡准确性和召回率）
- **范围**：0.1-1.0
- **如何设置**：拖动滑块调整

#### 3.4.2 重复检测阈值
- **作用**：控制重复照片的识别敏感度
- **推荐值**：5（适合大多数情况）
- **范围**：1-10
- **如何设置**：拖动滑块调整

## 四、配置操作指南

### 4.1 基本操作流程

1. **打开配置页面**
   - 访问 `http://127.0.0.1:8000/settings`
   - 或点击系统界面右上角的"设置"按钮

2. **修改配置参数**
   - 根据需要调整各项参数
   - 系统会实时显示当前值和默认值
   - 修改后"保存配置"按钮会变为可用状态

3. **保存配置**
   - 点击"保存配置"按钮
   - 系统会显示保存结果
   - 部分配置需要重启系统才能生效

4. **重置配置**
   - 点击"重置为默认值"按钮
   - 系统会恢复所有参数到默认状态
   - 需要重新保存才能生效

### 4.2 路径选择操作

#### 4.2.1 选择照片存储目录
1. 点击"照片存储目录"右侧的文件夹图标
2. 在弹出的文件夹选择对话框中选择目标目录
3. 系统会自动填入完整路径
4. 点击"保存配置"保存设置

#### 4.2.2 选择数据库文件位置
1. 点击"数据库文件位置"右侧的文件图标
2. 在弹出的文件选择对话框中选择数据库文件
3. 如果是新位置，系统会提示创建新数据库
4. 点击"保存配置"保存设置

### 4.3 配置验证

#### 4.3.1 路径验证
- 系统会自动验证路径的有效性
- 无效路径会显示错误提示
- 建议选择已存在的目录和文件

#### 4.3.2 权限验证
- 确保选择的目录有读写权限
- 系统会检查权限并显示结果
- 权限不足时会显示错误提示

## 五、常见问题解答

### 5.1 配置相关问题

**Q: 修改配置后为什么没有生效？**
A: 部分配置需要重启系统才能生效，请重启后再次检查。

**Q: 如何恢复默认配置？**
A: 点击"重置为默认值"按钮，然后点击"保存配置"。

**Q: 配置保存失败怎么办？**
A: 检查文件权限，确保系统有写入配置文件的权限。

### 5.2 路径选择问题

**Q: 为什么无法选择目录？**
A: 确保浏览器支持文件选择API，或使用手动输入方式。

**Q: 选择的路径显示不正确？**
A: 系统会自动转换为绝对路径，这是正常现象。

**Q: 如何手动输入路径？**
A: 直接在输入框中输入完整路径，支持相对路径和绝对路径。

### 5.3 性能相关问题

**Q: 缩略图质量设置多少合适？**
A: 建议设置为85%，既能保证质量又能控制文件大小。

**Q: 每页显示多少照片合适？**
A: 建议设置为12张，适合大多数屏幕尺寸。

**Q: 相似度阈值设置多少合适？**
A: 建议设置为0.8，平衡准确性和召回率。

## 六、最佳实践建议

### 6.1 存储位置规划

1. **照片存储目录**
   - 选择空间充足的磁盘分区
   - 建议使用SSD提高访问速度
   - 定期备份重要照片

2. **数据库文件位置**
   - 与照片存储目录放在同一位置
   - 便于整体备份和迁移
   - 定期备份数据库文件

### 6.2 性能优化建议

1. **缩略图设置**
   - 质量85%，尺寸300像素
   - 平衡显示效果和存储空间

2. **界面设置**
   - 每页12张照片
   - 相似照片8张
   - 热门标签和分类各10个

3. **搜索设置**
   - 相似度阈值0.8
   - 重复检测阈值5

### 6.3 安全建议

1. **API密钥管理**
   - 使用环境变量存储API密钥
   - 不要在配置文件中明文存储
   - 定期更换API密钥

2. **数据备份**
   - 定期备份照片和数据库
   - 使用系统提供的备份功能
   - 将备份存储在不同位置

## 七、技术支持

### 7.1 获取帮助

- 查看系统日志了解详细错误信息
- 检查配置文件格式是否正确
- 确认系统权限设置

### 7.2 联系支持

- 系统问题：查看日志文件
- 配置问题：参考本文档
- 功能问题：查看详细设计文档

---

**注意**：本指南基于系统V1.0版本编写，如有更新请参考最新文档。
